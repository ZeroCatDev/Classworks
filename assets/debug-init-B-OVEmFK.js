import{a7 as s,k as o,ao as k,r as L,j as R,o as N,w as l,d as e,l as _,q as g,t as a,z as c,U as z,y as V,O as B,P as C,X as T,Y as D,C as y,aP as G,s as n,aQ as K}from"./index-DFgkZgUi.js";import{a as P,V as S}from"./VRow-jsXcOZkp.js";import{V as F}from"./VForm-BGCFyVQN.js";import{V as d}from"./VTextField-DIOo4XZs.js";import{V as O}from"./VContainer-BTH5kiww.js";const I="kvinit.redirecting",X={__name:"debug-init",setup(Y){const i=s(o("server.provider")||"kv-server"),v=s(o("server.kvToken")||""),m=s(o("device.uuid")||"00000000-0000-4000-8000-000000000000"),f=s(o("server.authDomain")||"https://cs.example.com"),w=()=>{n("server.provider",i.value),n("server.kvToken",v.value),n("device.uuid",m.value),n("server.authDomain",f.value),location.reload()},b=()=>{try{sessionStorage.removeItem(I)}catch(u){console.debug(u)}},x=()=>{K.loadNamespaceInfo=async()=>{throw new Error("模拟加载错误")},location.reload()},U=k(()=>{try{return sessionStorage.getItem(I)}catch(u){return String(u)}}),E=k(()=>JSON.stringify({provider:o("server.provider"),kvToken:o("server.kvToken"),uuid:o("device.uuid"),authDomain:o("server.authDomain")},null,2));return(u,t)=>{const p=L("v-list-item-content");return N(),R(O,null,{default:l(()=>[e(P,null,{default:l(()=>[e(S,{cols:"12",md:"6"},{default:l(()=>[e(_,null,{default:l(()=>[e(g,null,{default:l(()=>[...t[4]||(t[4]=[a("KvInitialize 调试面板",-1)])]),_:1}),e(c,null,{default:l(()=>[e(F,null,{default:l(()=>[e(d,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=r=>i.value=r),label:"server.provider (kv-server/classworkscloud/other)"},null,8,["modelValue"]),e(d,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=r=>v.value=r),label:"server.kvToken (空表示未授权)"},null,8,["modelValue"]),e(d,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=r=>m.value=r),label:"device.uuid"},null,8,["modelValue"]),e(d,{modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=r=>f.value=r),label:"server.authDomain"},null,8,["modelValue"])]),_:1}),e(z,{class:"my-4"}),e(V,{color:"primary",class:"me-2",onClick:w},{default:l(()=>[...t[5]||(t[5]=[a(" 应用设置 ",-1)])]),_:1}),e(V,{color:"secondary",class:"me-2",onClick:b},{default:l(()=>[...t[6]||(t[6]=[a(" 清除重定向守卫 ",-1)])]),_:1}),e(V,{color:"error",onClick:x},{default:l(()=>[...t[7]||(t[7]=[a(" 模拟命名空间加载错误 ",-1)])]),_:1}),e(B,{"two-line":""},{default:l(()=>[e(C,null,{default:l(()=>[e(p,null,{default:l(()=>[e(T,null,{default:l(()=>[...t[8]||(t[8]=[a("当前 sessionGuard",-1)])]),_:1}),e(D,null,{default:l(()=>[a(y(U.value),1)]),_:1})]),_:1})]),_:1}),e(C,null,{default:l(()=>[e(p,null,{default:l(()=>[e(T,null,{default:l(()=>[...t[9]||(t[9]=[a("当前 settings",-1)])]),_:1}),e(D,null,{default:l(()=>[a(y(E.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{cols:"12",md:"6"},{default:l(()=>[e(_,null,{default:l(()=>[e(g,null,{default:l(()=>[...t[10]||(t[10]=[a("KvInitialize 预览",-1)])]),_:1}),e(c,null,{default:l(()=>[e(G)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{X as default};
