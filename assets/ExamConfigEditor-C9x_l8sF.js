import{d as Be}from"./dataProvider-CeGtED9E.js";import{g as we,p as he,al as $e,a4 as X,aq as Te,aT as Wt,av as ut,am as ae,an as Ue,a5 as P,ap as Ne,a6 as de,at as gt,aU as Jt,c as De,d as r,i as m,v as K,aV as Kt,F as pe,E as q,P as rt,Q as We,K as Nt,aW as qt,L as Gt,aX as Xt,n as Ke,e as ve,aY as qe,t as w,as as At,ax as Se,aZ as yt,a_ as Qt,a$ as kt,y as O,x as Ye,aE as at,b0 as et,aw as dt,b1 as Ft,b2 as Zt,b3 as je,b4 as ea,b5 as Ge,b6 as Et,b7 as bt,b8 as ta,I as Ot,aJ as aa,b9 as la,ba as na,bb as ia,bc as ra,bd as oa,be as pt,aB as sa,a7 as ua,aF as da,_ as ca,A as be,o as H,j as ie,B as oe,w as d,C as se,G as Qe,ac as ma,z as Oe,l as Pe,D as fa,q as Le,O as va,bf as ha,J as ga,M as lt,H as ya}from"./index-BHe9OE2G.js";import{V as nt}from"./VAlert-DaOUFf0L.js";import{V as ka}from"./VSkeletonLoader-B8A9kN7v.js";import{a as ba,V as Ze}from"./VTooltip-C5ashPqH.js";import{V as Je,b as pa}from"./VChip-DR-XsghV.js";import{a as fe,V as He}from"./VRow-C7JDJF46.js";import{e as wa,V as Ae,f as Da}from"./VTextField-_piCLKje.js";import{V as Ca}from"./VTextarea-CGchjrkv.js";import{V as Va}from"./VSwitch-BTc11j9V.js";import{u as xa,a as Ta,b as Sa,V as ot,c as Ma,h as _a,m as Ia,d as Pa}from"./filter-D9C8KpO5.js";import{V as Na}from"./VCheckboxBtn-De8cKZQ_.js";import{V as wt,m as Aa}from"./VSheet-DVhcOq_W.js";const Fa=he({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Pa({filterKeys:["title"]}),...Ia(),...Se(Da({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VAutocomplete"),Ea=we()({name:"VAutocomplete",props:Fa(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=$e(),a=X(),s=Te(!1),l=Te(!0),u=Te(!1),o=X(),h=X(),c=Te(-1),x=Te(null),{items:M,transformIn:D,transformOut:z}=Wt(e),{textColorClasses:p,textColorStyles:T}=ut(()=>{var g;return(g=a.value)==null?void 0:g.color}),y=ae(e,"search",""),V=ae(e,"modelValue",[],g=>D(g===null?[null]:Ue(g)),g=>{const B=z(g);return e.multiple?B:B[0]??null}),$=P(()=>typeof e.counterValue=="function"?e.counterValue(V.value):typeof e.counterValue=="number"?e.counterValue:V.value.length),f=wa(e),{filteredItems:F,getMatches:S}=xa(e,M,()=>x.value??(l.value?"":y.value)),v=P(()=>e.hideSelected&&x.value===null?F.value.filter(g=>!V.value.some(B=>B.value===g.value)):F.value),_=Ne(()=>e.closableChips&&!f.isReadonly.value&&!f.isDisabled.value),Y=P(()=>!!(e.chips||n.chip)),R=P(()=>Y.value||!!n.selection),ee=P(()=>V.value.map(g=>g.props.value)),k=P(()=>v.value.find(g=>g.type==="item"&&!g.props.disabled)),E=P(()=>{var B;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&y.value===((B=k.value)==null?void 0:B.title))&&v.value.length>0&&!l.value&&!u.value}),W=P(()=>e.hideNoData&&!v.value.length||f.isReadonly.value||f.isDisabled.value),I=ae(e,"menu"),U=P({get:()=>I.value,set:g=>{var B;I.value&&!g&&((B=o.value)!=null&&B.ΨopenChildren.size)||g&&W.value||(I.value=g)}}),{menuId:ge,ariaExpanded:ye,ariaControls:Me}=Ta(e,U),b=X(),A=Sa(b,a);function L(g){e.openOnClear&&(U.value=!0),y.value=""}function te(){W.value||(U.value=!0)}function C(g){W.value||(s.value&&(g.preventDefault(),g.stopPropagation()),U.value=!U.value)}function N(g){var B;(yt(g)||g.key==="Backspace")&&((B=a.value)==null||B.focus())}function Z(g){var ne,ke,J,ue,xe;if(f.isReadonly.value)return;const B=(ne=a.value)==null?void 0:ne.selectionStart,G=V.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(g.key)&&g.preventDefault(),["Enter","ArrowDown"].includes(g.key)&&(U.value=!0),["Escape"].includes(g.key)&&(U.value=!1),E.value&&["Enter","Tab"].includes(g.key)&&k.value&&!V.value.some(re=>{let{value:j}=re;return j===k.value.value})&&_e(k.value),g.key==="ArrowDown"&&E.value&&((ke=b.value)==null||ke.focus("next")),["Backspace","Delete"].includes(g.key)){if(!e.multiple&&R.value&&V.value.length>0&&!y.value)return _e(V.value[0],!1);if(~c.value){g.preventDefault();const re=c.value;_e(V.value[c.value],!1),c.value=re>=G-1?G-2:re}else g.key==="Backspace"&&!y.value&&(c.value=G-1);return}if(e.multiple)if(g.key==="ArrowLeft"){if(c.value<0&&B&&B>0)return;const re=c.value>-1?c.value-1:G-1;if(V.value[re])c.value=re;else{const j=((J=y.value)==null?void 0:J.length)??null;c.value=-1,(ue=a.value)==null||ue.setSelectionRange(j,j)}}else if(g.key==="ArrowRight"){if(c.value<0)return;const re=c.value+1;V.value[re]?c.value=re:(c.value=-1,(xe=a.value)==null||xe.setSelectionRange(0,0))}else~c.value&&yt(g)&&(c.value=-1)}function le(g){if(kt(a.value,":autofill")||kt(a.value,":-webkit-autofill")){const B=M.value.find(G=>G.title===g.target.value);B&&_e(B)}}function ce(){var g;e.eager&&((g=h.value)==null||g.calculateVisibleItems())}function Ce(){var g;s.value&&(l.value=!0,(g=a.value)==null||g.focus()),x.value=null}function Ve(g){s.value=!0,setTimeout(()=>{u.value=!0})}function Q(g){u.value=!1}function Ee(g){(g==null||g===""&&!e.multiple&&!R.value)&&(V.value=[])}const Re=Te(!1);function _e(g){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!g||g.props.disabled))if(e.multiple){const G=V.value.findIndex(ke=>(e.valueComparator||Qt)(ke.value,g.value)),ne=B??!~G;if(~G){const ke=ne?[...V.value,g]:[...V.value];ke.splice(G,1),V.value=ke}else ne&&(V.value=[...V.value,g]);e.clearOnSelect&&(y.value="")}else{const G=B!==!1;V.value=G?[g]:[],x.value=l.value?"":y.value??"",y.value=G&&!R.value?g.title:"",gt(()=>{U.value=!1,l.value=!0})}}return de(s,(g,B)=>{var G;g!==B&&(g?(Re.value=!0,y.value=e.multiple||R.value?"":String(((G=V.value.at(-1))==null?void 0:G.props.title)??""),l.value=!0,gt(()=>Re.value=!1)):(!e.multiple&&y.value==null&&(V.value=[]),U.value=!1,!l.value&&y.value&&(x.value=y.value),y.value="",c.value=-1))}),de(y,g=>{!s.value||Re.value||(g&&(U.value=!0),l.value=!g)}),de(U,g=>{if(!e.hideSelected&&g&&V.value.length&&l.value){const B=v.value.findIndex(G=>V.value.some(ne=>G.value===ne.value));Jt&&window.requestAnimationFrame(()=>{var G;B>=0&&((G=h.value)==null||G.scrollToIndex(B))})}g&&(x.value=null)}),de(M,(g,B)=>{U.value||s.value&&!B.length&&g.length&&(U.value=!0)}),De(()=>{const g=!!(!e.hideNoData||v.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),B=V.value.length>0,G=Ae.filterProps(e);return r(Ae,q({ref:a},G,{modelValue:y.value,"onUpdate:modelValue":[ne=>y.value=ne,Ee],focused:s.value,"onUpdate:focused":ne=>s.value=ne,validationValue:V.externalValue,counterValue:$.value,dirty:B,onChange:le,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":U.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!R.value,"v-autocomplete--selecting-index":c.value>-1},e.class],style:e.style,readonly:f.isReadonly.value,placeholder:B?void 0:e.placeholder,"onClick:clear":L,"onMousedown:control":te,onKeydown:Z,"aria-expanded":ye.value,"aria-controls":Me.value}),{...n,default:ne=>{let{id:ke}=ne;return m(pe,null,[r(ot,q({id:ge.value,ref:o,modelValue:U.value,"onUpdate:modelValue":J=>U.value=J,activator:"parent",contentClass:"v-autocomplete__content",disabled:W.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:ce,onAfterLeave:Ce},e.menuProps),{default:()=>[g&&r(rt,q({ref:b,filterable:!0,selected:ee.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:J=>J.preventDefault(),onKeydown:N,onFocusin:Ve,onFocusout:Q,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-labelledby":`${ke.value}-label`,"aria-multiselectable":e.multiple,color:e.itemColor??e.color},A,e.listProps),{default:()=>{var J,ue,xe;return[(J=n["prepend-item"])==null?void 0:J.call(n),!v.value.length&&!e.hideNoData&&(((ue=n["no-data"])==null?void 0:ue.call(n))??r(We,{key:"no-data",title:i(e.noDataText)},null)),r(Ma,{ref:h,renderless:!0,items:v.value,itemKey:"value"},{default:re=>{var ft,vt,ht;let{item:j,index:Ie,itemRef:me}=re;const mt=q(j.props,{ref:me,key:j.value,active:E.value&&j===k.value?!0:void 0,onClick:()=>_e(j,null),"aria-posinset":Ie+1,"aria-setsize":v.value.length});return j.type==="divider"?((ft=n.divider)==null?void 0:ft.call(n,{props:j.raw,index:Ie}))??r(Nt,q(j.props,{key:`divider-${Ie}`}),null):j.type==="subheader"?((vt=n.subheader)==null?void 0:vt.call(n,{props:j.raw,index:Ie}))??r(qt,q(j.props,{key:`subheader-${Ie}`}),null):((ht=n.item)==null?void 0:ht.call(n,{item:j,index:Ie,props:mt}))??r(We,q(mt,{role:"option"}),{prepend:Xe=>{let{isSelected:jt}=Xe;return m(pe,null,[e.multiple&&!e.hideSelected?r(Na,{key:j.value,modelValue:jt,ripple:!1,tabindex:"-1","aria-hidden":!0,onClick:zt=>zt.preventDefault()},null):void 0,j.props.prependAvatar&&r(Gt,{image:j.props.prependAvatar},null),j.props.prependIcon&&r(K,{icon:j.props.prependIcon},null)])},title:()=>{var Xe;return l.value?j.title:_a("v-autocomplete",j.title,(Xe=S(j))==null?void 0:Xe.title)}})}}),(xe=n["append-item"])==null?void 0:xe.call(n)]}})]}),V.value.map((J,ue)=>{function xe(me){me.stopPropagation(),me.preventDefault(),_e(J,!1)}const re=q(Je.filterProps(J.props),{"onClick:close":xe,onKeydown(me){me.key!=="Enter"&&me.key!==" "||(me.preventDefault(),me.stopPropagation(),xe(me))},onMousedown(me){me.preventDefault(),me.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0}),j=Y.value?!!n.chip:!!n.selection,Ie=j?Xt(Y.value?n.chip({item:J,index:ue,props:re}):n.selection({item:J,index:ue})):void 0;if(!(j&&!Ie))return m("div",{key:J.value,class:ve(["v-autocomplete__selection",ue===c.value&&["v-autocomplete__selection--selected",p.value]]),style:Ke(ue===c.value?T.value:{})},[Y.value?n.chip?r(qe,{key:"chip-defaults",defaults:{VChip:{closable:_.value,size:"small",text:J.title}}},{default:()=>[Ie]}):r(Je,q({key:"chip",closable:_.value,size:"small",text:J.title,disabled:J.props.disabled},re),null):Ie??m("span",{class:"v-autocomplete__selection-text"},[J.title,e.multiple&&ue<V.value.length-1&&m("span",{class:"v-autocomplete__selection-comma"},[w(",")])])])})])},"append-inner":function(){var ue,xe;for(var ne=arguments.length,ke=new Array(ne),J=0;J<ne;J++)ke[J]=arguments[J];return m(pe,null,[(ue=n["append-inner"])==null?void 0:ue.call(n,...ke),e.menuIcon?r(K,{class:"v-autocomplete__menu-icon",color:(xe=a.value)==null?void 0:xe.fieldIconColor,icon:e.menuIcon,onMousedown:C,onClick:Kt,"aria-hidden":!0,tabindex:"-1"},null):void 0])}})}),At({isFocused:s,isPristine:l,menu:U,search:y,filteredItems:F,select:_e},a)}}),Yt=he({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],controlVariant:{type:String,default:"docked"},noMonthPicker:Boolean,disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:et,default:"$next"},prevIcon:{type:et,default:"$prev"},modeIcon:{type:et,default:"$subgroup"},text:String,monthText:String,yearText:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Dt=we()({name:"VDatePickerControls",props:Yt(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:prev-year":()=>!0,"click:next-year":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:a}=$e(),s=P(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),l=P(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),u=P(()=>Array.isArray(e.disabled)?e.disabled.includes("prev-month"):!!e.disabled),o=P(()=>Array.isArray(e.disabled)?e.disabled.includes("next-month"):!!e.disabled),h=P(()=>Array.isArray(e.disabled)?e.disabled.includes("prev-year"):!!e.disabled),c=P(()=>Array.isArray(e.disabled)?e.disabled.includes("next-year"):!!e.disabled);function x(){n("click:prev")}function M(){n("click:next")}function D(){n("click:prev-year")}function z(){n("click:next-year")}function p(){n("click:year")}function T(){n("click:month")}return De(()=>{const y={VBtn:{density:"comfortable",variant:"text"}},V=r(O,{"data-testid":"prev-month",disabled:u.value,icon:e.prevIcon,"aria-label":a("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:x},null),$=r(O,{"data-testid":"next-month",disabled:o.value,icon:e.nextIcon,"aria-label":a("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:M},null),f=r(O,{"data-testid":"prev-year",disabled:h.value,icon:e.prevIcon,"aria-label":a("$vuetify.datePicker.ariaLabel.previousYear"),onClick:D},null),F=r(O,{"data-testid":"next-year",disabled:c.value,icon:e.nextIcon,"aria-label":a("$vuetify.datePicker.ariaLabel.nextYear"),onClick:z},null),S=r(O,{class:"v-date-picker-controls__only-month-btn","data-testid":"month-btn",density:"default",disabled:s.value,text:e.monthText,appendIcon:e.modeIcon,rounded:!0,"aria-label":a("$vuetify.datePicker.ariaLabel.selectMonth"),onClick:T},null),v=r(O,{class:"v-date-picker-controls__only-year-btn","data-testid":"year-btn",density:"default",disabled:l.value,text:e.yearText,appendIcon:e.modeIcon,rounded:!0,"aria-label":a("$vuetify.datePicker.ariaLabel.selectYear"),onClick:p},null),_=r(O,{class:"v-date-picker-controls__year-btn","data-testid":"year-btn",density:"default",disabled:l.value,text:e.text,appendIcon:e.modeIcon,rounded:!0,"aria-label":a("$vuetify.datePicker.ariaLabel.selectYear"),onClick:p},null),Y=m(pe,null,[r(O,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",height:"36",disabled:s.value,text:e.text,rounded:!0,"aria-label":a("$vuetify.datePicker.ariaLabel.selectMonth"),onClick:T},null),r(O,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:l.value,icon:e.modeIcon,"aria-label":a("$vuetify.datePicker.ariaLabel.selectYear"),onClick:p},null)]),R={viewMode:e.viewMode,disabled:Array.isArray(e.disabled)?e.disabled:[],monthYearText:e.text??"",monthText:e.monthText??"",yearText:e.yearText??"",openMonths:T,openYears:p,prevMonth:x,nextMonth:M,prevYear:D,nextYear:z},ee=m(pe,null,[e.noMonthPicker?_:Y,r(Ye,null,null),m("div",{class:"v-date-picker-controls__month"},[V,$])]),k=m(pe,null,[m("div",{class:"v-date-picker-controls__month"},[V,S,$]),r(Ye,null,null),m("div",{class:"v-date-picker-controls__year"},[f,v,F])]);return r(qe,{defaults:y},{default:()=>{var E;return[m("div",{class:ve(["v-date-picker-controls",`v-date-picker-controls--variant-${e.controlVariant}`]),style:{"--v-date-picker-controls-height":at(e.controlHeight)}},[((E=i.default)==null?void 0:E.call(i,R))??m(pe,null,[e.controlVariant==="modal"&&ee,e.controlVariant==="docked"&&k])])]}})}),{}}}),Oa=he({appendIcon:et,color:String,header:String,transition:String,onClick:Zt()},"VDatePickerHeader"),Ct=we()({name:"VDatePickerHeader",props:Oa(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:a,backgroundColorStyles:s}=dt(()=>e.color);function l(){n("click")}function u(){n("click:append")}return De(()=>{const o=!!(i.default||e.header),h=!!(i.append||e.appendIcon);return m("div",{class:ve(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},a.value]),style:Ke(s.value),onClick:l},[i.prepend&&m("div",{key:"prepend",class:"v-date-picker-header__prepend"},[i.prepend()]),o&&r(Ft,{key:"content",name:e.transition},{default:()=>{var c;return[m("div",{key:e.header,class:"v-date-picker-header__content"},[((c=i.default)==null?void 0:c.call(i))??e.header])]}}),h&&m("div",{class:"v-date-picker-header__append"},[i.append?r(qe,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var c;return[(c=i.append)==null?void 0:c.call(i)]}}):r(O,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),Ya=he({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function Ua(e){const t=je(),n=ae(e,"modelValue",[],p=>Ue(p).map(T=>t.date(T))),i=P(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),a=ae(e,"year",void 0,p=>{const T=p!=null?Number(p):t.getYear(i.value);return t.startOfYear(t.setYear(t.date(),T))},p=>t.getYear(p)),s=ae(e,"month",void 0,p=>{const T=p!=null?Number(p):t.getMonth(i.value),y=t.setYear(t.startOfMonth(t.date()),t.getYear(a.value));return t.setMonth(y,T)},p=>t.getMonth(p)),l=P(()=>{const p=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((T,y)=>e.weekdays.includes((y+p)%7))}),u=P(()=>{const p=t.getWeekArray(s.value,e.firstDayOfWeek),T=p.flat(),y=6*7;if(e.weeksInMonth==="static"&&T.length<y){const V=T[T.length-1];let $=[];for(let f=1;f<=y-T.length;f++)$.push(t.addDays(V,f)),f%7===0&&(p.push($),$=[])}return p});function o(p,T){return p.filter(y=>e.weekdays.includes(t.toJsDate(y).getDay())).map((y,V)=>{const $=t.toISO(y),f=!t.isSameMonth(y,s.value),F=t.isSameDay(y,t.startOfMonth(s.value)),S=t.isSameDay(y,t.endOfMonth(s.value)),v=t.isSameDay(y,s.value),_=e.weekdays.length;return{date:y,formatted:t.format(y,"keyboardDate"),isAdjacent:f,isDisabled:z(y),isEnd:S,isHidden:f&&!e.showAdjacentMonths,isSame:v,isSelected:n.value.some(Y=>t.isSameDay(y,Y)),isStart:F,isToday:t.isSameDay(y,T),isWeekEnd:V%_===_-1,isWeekStart:V%_===0,isoDate:$,localized:t.format(y,"dayOfMonth"),month:t.getMonth(y),year:t.getYear(y)}})}const h=P(()=>{const p=t.startOfWeek(i.value,e.firstDayOfWeek),T=[];for(let V=0;V<=6;V++)T.push(t.addDays(p,V));const y=t.date();return o(T,y)}),c=P(()=>{const p=u.value.flat(),T=t.date();return o(p,T)}),x=P(()=>u.value.map(p=>p.length?t.getWeek(p[0],e.firstDayOfWeek,e.firstDayOfYear):null)),{minDate:M,maxDate:D}=Ut(e);function z(p){if(e.disabled)return!0;const T=t.date(p);return M.value&&t.isBefore(t.endOfDay(T),M.value)||D.value&&t.isAfter(T,D.value)?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(y=>t.isSameDay(t.date(y),T)):typeof e.allowedDates=="function"?!e.allowedDates(T):!1}return{displayValue:i,daysInMonth:c,daysInWeek:h,genDays:o,model:n,weeksInMonth:u,weekdayLabels:l,weekNumbers:x}}function Ut(e){const t=je(),n=P(()=>{if(!e.min)return null;const l=t.date(e.min);return t.isValid(l)?l:null}),i=P(()=>{if(!e.max)return null;const l=t.date(e.max);return t.isValid(l)?l:null});function a(l){return n.value&&t.isBefore(l,n.value)?n.value:i.value&&t.isAfter(l,i.value)?i.value:l}function s(l){return(!n.value||t.isAfter(l,n.value))&&(!i.value||t.isBefore(l,i.value))}return{minDate:n,maxDate:i,clampDate:a,isInAllowedRange:s}}const Bt=he({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>null},...Se(Ya(),["displayValue"])},"VDatePickerMonth"),Vt=we()({name:"VDatePickerMonth",props:Bt(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const a=X(),{t:s}=$e(),{daysInMonth:l,model:u,weekNumbers:o,weekdayLabels:h}=Ua(e),c=je(),x=Te(),M=Te(),D=Te(!1),z=Ne(()=>D.value?e.reverseTransition:e.transition);e.multiple==="range"&&u.value.length>0&&(x.value=u.value[0],u.value.length>1&&(M.value=u.value[u.value.length-1]));const p=P(()=>{const S=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return u.value.length>=S});de(l,(S,v)=>{v&&(D.value=c.isBefore(S[0].date,v[0].date))});function T(S){const v=c.startOfDay(S);if(u.value.length===0?x.value=void 0:u.value.length===1&&(x.value=u.value[0],M.value=void 0),!x.value)x.value=v,u.value=[x.value];else if(M.value)x.value=S,M.value=void 0,u.value=[x.value];else{if(c.isSameDay(v,x.value)){x.value=void 0,u.value=[];return}else c.isBefore(v,x.value)?(M.value=c.endOfDay(x.value),x.value=v):M.value=c.endOfDay(v);u.value=ea(c,x.value,M.value)}}function y(S){const v=c.format(S.date,"fullDateWithWeekday"),_=S.isToday?"currentDate":"selectDate";return s(`$vuetify.datePicker.ariaLabel.${_}`,v)}function V(S){const v=u.value.findIndex(_=>c.isSameDay(_,S));if(v===-1)u.value=[...u.value,S];else{const _=[...u.value];_.splice(v,1),u.value=_}}function $(S){e.multiple==="range"?T(S):e.multiple?V(S):u.value=[S]}function f(S){const{events:v,eventColor:_}=e;let Y,R=[];if(Array.isArray(v)?Y=v.includes(S):v instanceof Function?Y=v(S)||!1:v?Y=v[S]||!1:Y=!1,Y)Y!==!0?R=Ue(Y):typeof _=="string"?R=[_]:typeof _=="function"?R=Ue(_(S)):Array.isArray(_)?R=_:typeof _=="object"&&_!==null&&(R=Ue(_[S]));else return[];return R.length?R.filter(Boolean).map(ee=>typeof ee=="string"?ee:"surface-variant"):["surface-variant"]}function F(S){const v=f(S);return v.length?m("div",{class:"v-date-picker-month__events"},[v.map(_=>r(ba,{dot:!0,color:_},null))]):null}De(()=>m("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&m("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&m("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[w(" ")]),o.value.map(S=>m("div",{class:ve(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[S]))]),r(Ft,{name:z.value},{default:()=>{var S;return[m("div",{ref:a,key:(S=l.value[0].date)==null?void 0:S.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&h.value.map(v=>m("div",{class:ve(["v-date-picker-month__day","v-date-picker-month__weekday"])},[v])),l.value.map((v,_)=>{var R;const Y={props:{class:"v-date-picker-month__day-btn",color:v.isSelected||v.isToday?e.color:void 0,disabled:v.isDisabled,icon:!0,ripple:!1,variant:v.isSelected?"flat":v.isToday?"outlined":"text","aria-label":y(v),"aria-current":v.isToday?"date":void 0,onClick:()=>$(v.date)},item:v,i:_};return p.value&&!v.isSelected&&(v.isDisabled=!0),m("div",{class:ve(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":v.isAdjacent,"v-date-picker-month__day--hide-adjacent":v.isHidden,"v-date-picker-month__day--selected":v.isSelected,"v-date-picker-month__day--week-end":v.isWeekEnd,"v-date-picker-month__day--week-start":v.isWeekStart}]),"data-v-date":v.isDisabled?void 0:v.isoDate},[(e.showAdjacentMonths||!v.isAdjacent)&&(((R=i.day)==null?void 0:R.call(i,Y))??r(O,Y.props,{default:()=>[v.localized,F(v.isoDate)]}))])})])]}})]))}}),Lt=he({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),xt=we()({name:"VDatePickerMonths",props:Lt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const a=je(),s=ae(e,"modelValue"),l=P(()=>{let o=a.startOfYear(a.date());return e.year&&(o=a.setYear(o,e.year)),Ge(12).map(h=>{const c=a.format(o,"monthShort"),x=a.format(o,"month"),M=!!(!u(h)||e.min&&a.isAfter(a.startOfMonth(a.date(e.min)),o)||e.max&&a.isAfter(o,a.startOfMonth(a.date(e.max))));return o=a.getNextMonth(o),{isDisabled:M,text:c,label:x,value:h}})});Et(()=>{s.value=s.value??a.getMonth(a.date())});function u(o){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(o):typeof e.allowedMonths=="function"?e.allowedMonths(o):!0}return De(()=>m("div",{class:"v-date-picker-months",style:{height:at(e.height)}},[m("div",{class:"v-date-picker-months__content"},[l.value.map((o,h)=>{var M;const c={active:s.value===h,ariaLabel:o.label,color:s.value===h?e.color:void 0,disabled:o.isDisabled,rounded:!0,text:o.text,variant:s.value===o.value?"flat":"text",onClick:()=>x(h)};function x(D){if(s.value===D){n("update:modelValue",s.value);return}s.value=D}return((M=i.month)==null?void 0:M.call(i,{month:o,i:h,props:c}))??r(O,q({key:"month"},c),null)})])])),{}}}),Rt=he({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),Tt=we()({name:"VDatePickerYears",props:Rt(),directives:{vIntersect:bt},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const a=je(),s=ae(e,"modelValue"),l=P(()=>{const c=a.getYear(a.date());let x=c-100,M=c+52;e.min&&(x=a.getYear(a.date(e.min))),e.max&&(M=a.getYear(a.date(e.max)));let D=a.startOfYear(a.date());return D=a.setYear(D,x),Ge(M-x+1,x).map(z=>{const p=a.format(D,"year");return D=a.setYear(D,a.getYear(D)+1),{text:p,value:z,isDisabled:!h(z)}})});Et(()=>{s.value=s.value??a.getYear(a.date())});const u=ta();function o(){var c,x;(c=u.el)==null||c.focus(),(x=u.el)==null||x.scrollIntoView({block:"center"})}function h(c){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(c):typeof e.allowedYears=="function"?e.allowedYears(c):!0}return De(()=>Ot(m("div",{class:"v-date-picker-years",style:{height:at(e.height)}},[m("div",{class:"v-date-picker-years__content"},[l.value.map((c,x)=>{var D;const M={ref:s.value===c.value?u:void 0,active:s.value===c.value,color:s.value===c.value?e.color:void 0,rounded:!0,text:c.text,disabled:c.isDisabled,variant:s.value===c.value?"flat":"text",onClick:()=>{if(s.value===c.value){n("update:modelValue",s.value);return}s.value=c.value}};return((D=i.year)==null?void 0:D.call(i,{year:c,i:x,props:M}))??r(O,q({key:"month"},M),null)})])]),[[bt,{handler:o},null,{once:!0}]])),{}}}),Ba=aa("v-picker-title"),ct=he({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...Aa()},"VPicker"),tt=we()({name:"VPicker",props:ct(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:a}=dt(()=>e.color);return De(()=>{const s=wt.filterProps(e),l=!e.hideTitle&&!!(e.title||n.title);return r(wt,q(s,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>{var u;return[!e.hideHeader&&m("div",{key:"header",class:ve(["v-picker__header-wrapper",i.value]),style:Ke([a.value])},[l&&r(Ba,{key:"picker-title"},{default:()=>{var o;return[((o=n.title)==null?void 0:o.call(n))??e.title]}}),n.header&&m("div",{class:"v-picker__header"},[n.header()])]),m("div",{class:"v-picker__body"},[(u=n.default)==null?void 0:u.call(n)]),n.actions&&r(qe,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[m("div",{class:"v-picker__actions"},[n.actions()])]})]}})}),{}}}),La=he({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,headerDateFormat:{type:String,default:"normalDateWithWeekday"},landscapeHeaderWidth:[Number,String],...Se(Yt(),["active","monthText","yearText"]),...Bt({weeksInMonth:"static"}),...Se(Lt(),["modelValue"]),...Se(Rt(),["modelValue"]),...ct({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),St=we()({name:"VDatePicker",props:La(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const a=je(),{t:s}=$e(),{rtlClasses:l}=la(),u=ae(e,"modelValue",void 0,C=>Ue(C).map(N=>a.date(N)),C=>e.multiple?C:C[0]),o=ae(e,"viewMode"),{minDate:h,maxDate:c,clampDate:x}=Ut(e),M=P(()=>{var Z;const C=a.date(),N=(Z=u.value)!=null&&Z[0]?a.date(u.value[0]):x(C);return N&&a.isValid(N)?N:C}),D=Ne(()=>e.headerColor??e.color),z=ae(e,"month"),p=P({get:()=>Number(z.value??a.getMonth(a.startOfMonth(M.value))),set:C=>z.value=C}),T=ae(e,"year"),y=P({get:()=>Number(T.value??a.getYear(a.startOfYear(a.setMonth(M.value,p.value)))),set:C=>T.value=C}),V=Te(!1),$=P(()=>{if(e.multiple&&u.value.length>1)return s("$vuetify.datePicker.itemsSelected",u.value.length);const C=u.value[0]&&a.isValid(u.value[0])?a.format(a.date(u.value[0]),e.headerDateFormat):s(e.header);return e.landscape&&C.split(" ").length===3?C.replace(" ",`
`):C}),f=Ne(()=>{let C=a.date();return C=a.setDate(C,1),C=a.setMonth(C,p.value),C=a.setYear(C,y.value),C}),F=Ne(()=>a.format(f.value,"monthAndYear")),S=Ne(()=>a.format(f.value,"monthShort")),v=Ne(()=>a.format(f.value,"year")),_=Ne(()=>`date-picker-header${V.value?"-reverse":""}-transition`),Y=P(()=>{if(e.disabled)return!0;const C=[];if(o.value!=="month")C.push("prev-month","next-month","prev-year","next-year");else{let N=a.date();if(N=a.startOfMonth(N),N=a.setMonth(N,p.value),N=a.setYear(N,y.value),h.value){const Z=a.addDays(a.startOfMonth(N),-1),le=a.addDays(a.startOfYear(N),-1);a.isAfter(h.value,Z)&&C.push("prev-month"),a.isAfter(h.value,le)&&C.push("prev-year")}if(c.value){const Z=a.addDays(a.endOfMonth(N),1),le=a.addDays(a.endOfYear(N),1);a.isAfter(Z,c.value)&&C.push("next-month"),a.isAfter(le,c.value)&&C.push("next-year")}}return C}),R=P(()=>e.allowedYears||E),ee=P(()=>e.allowedMonths||W);function k(C,N){const Z=e.allowedDates;if(typeof Z!="function")return!0;const le=1+ia(a,C,N);for(let ce=0;ce<le;ce++)if(Z(a.addDays(C,ce)))return!0;return!1}function E(C){if(typeof e.allowedDates=="function"){const N=a.parseISO(`${C}-01-01`);return k(N,a.endOfYear(N))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const N of e.allowedDates)if(a.getYear(a.date(N))===C)return!0;return!1}return!0}function W(C){if(typeof e.allowedDates=="function"){const N=String(C+1).padStart(2,"0"),Z=a.parseISO(`${y.value}-${N}-01`);return k(Z,a.endOfMonth(Z))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const N of e.allowedDates)if(a.getYear(a.date(N))===y.value&&a.getMonth(a.date(N))===C)return!0;return!1}return!0}function I(){p.value<11?p.value++:(y.value++,p.value=0,te()),L()}function U(){p.value>0?p.value--:(y.value--,p.value=11,te()),L()}function ge(){if(y.value++,c.value){const C=String(p.value+1).padStart(2,"0"),N=a.parseISO(`${y.value}-${C}-01`);a.isAfter(N,c.value)&&(p.value=a.getMonth(c.value))}te()}function ye(){if(y.value--,h.value){const C=String(p.value+1).padStart(2,"0"),N=a.endOfMonth(a.parseISO(`${y.value}-${C}-01`));a.isAfter(h.value,N)&&(p.value=a.getMonth(h.value))}te()}function Me(){o.value="month"}function b(){o.value=o.value==="months"?"month":"months"}function A(){o.value=o.value==="year"?"month":"year"}function L(){o.value==="months"&&b()}function te(){o.value==="year"&&A()}return de(u,(C,N)=>{const Z=Ue(N),le=Ue(C);if(!le.length)return;const ce=a.date(Z[Z.length-1]),Ce=a.date(le[le.length-1]);if(a.isSameDay(ce,Ce))return;const Ve=a.getMonth(Ce),Q=a.getYear(Ce);Ve!==p.value&&(p.value=Ve,L()),Q!==y.value&&(y.value=Q,te()),V.value=a.isBefore(ce,Ce)}),De(()=>{const C=tt.filterProps(e),N=Se(Dt.filterProps(e),["viewMode"]),Z=Ct.filterProps(e),le=Vt.filterProps(e),ce=Se(xt.filterProps(e),["modelValue"]),Ce=Se(Tt.filterProps(e),["modelValue"]),Ve={color:D.value,header:$.value,transition:_.value};return r(tt,q(C,{color:D.value,class:["v-date-picker",`v-date-picker--${o.value}`,{"v-date-picker--show-week":e.showWeek},l.value,e.class],style:[{"--v-date-picker-landscape-header-width":at(e.landscapeHeaderWidth)},e.style]}),{title:()=>{var Q;return((Q=i.title)==null?void 0:Q.call(i))??m("div",{class:"v-date-picker__title"},[s(e.title)])},header:()=>i.header?r(qe,{defaults:{VDatePickerHeader:{...Ve}}},{default:()=>{var Q;return[(Q=i.header)==null?void 0:Q.call(i,Ve)]}}):r(Ct,q({key:"header"},Z,Ve,{onClick:o.value!=="month"?Me:void 0}),{prepend:i.prepend,append:i.append}),default:()=>m(pe,null,[r(Dt,q(N,{disabled:Y.value,viewMode:o.value,text:F.value,monthText:S.value,yearText:v.value,"onClick:next":I,"onClick:prev":U,"onClick:nextYear":ge,"onClick:prevYear":ye,"onClick:month":b,"onClick:year":A}),{default:i.controls}),r(na,{hideOnLeave:!0},{default:()=>[o.value==="months"?r(xt,q({key:"date-picker-months"},ce,{modelValue:p.value,"onUpdate:modelValue":[Q=>p.value=Q,L],min:h.value,max:c.value,year:y.value,allowedMonths:ee.value}),{month:i.month}):o.value==="year"?r(Tt,q({key:"date-picker-years"},Ce,{modelValue:y.value,"onUpdate:modelValue":[Q=>y.value=Q,te],min:h.value,max:c.value,allowedYears:R.value}),{year:i.year}):r(Vt,q({key:"date-picker-month"},le,{modelValue:u.value,"onUpdate:modelValue":Q=>u.value=Q,month:p.value,"onUpdate:month":[Q=>p.value=Q,L],year:y.value,"onUpdate:year":[Q=>y.value=Q,te],min:h.value,max:c.value}),{day:i.day})]})]),actions:i.actions})}),{}}}),Ra=he({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),Mt=we()({name:"VTimePickerClock",props:Ra(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const i=X(null),a=X(null),s=X(void 0),l=X(!1),u=X(null),o=X(null),h=oa(b=>n("change",b),750),{textColorClasses:c,textColorStyles:x}=ut(()=>e.color),{backgroundColorClasses:M,backgroundColorStyles:D}=dt(()=>e.color),z=P(()=>e.max-e.min+1),p=P(()=>e.double?z.value/2:z.value),T=P(()=>360/p.value),y=P(()=>T.value*Math.PI/180),V=P(()=>e.modelValue==null?e.min:e.modelValue),$=P(()=>.62),f=P(()=>{const b=[];for(let A=e.min;A<=e.max;A=A+e.step)b.push(A);return b});de(()=>e.modelValue,b=>{s.value=b});function F(b){s.value!==b&&(s.value=b),n("input",b)}function S(b){return!e.allowedValues||e.allowedValues(b)}function v(b){if(!e.scrollable||e.disabled)return;b.preventDefault();const A=Math.sign(-b.deltaY||1);let L=V.value;do L=L+A,L=(L-e.min+z.value)%z.value+e.min;while(!S(L)&&L!==V.value);L!==e.displayedValue&&F(L),h(L)}function _(b){return e.double&&b-e.min>=p.value}function Y(b){return _(b)?$.value:1}function R(b){const A=e.rotate*Math.PI/180;return{x:Math.sin((b-e.min)*y.value+A)*Y(b),y:-Math.cos((b-e.min)*y.value+A)*Y(b)}}function ee(b,A){const L=(Math.round(b/T.value)+(A?p.value:0))%z.value+e.min;return b<360-T.value/2?L:A?e.max-p.value+1:e.min}function k(b){const{x:A,y:L}=R(b);return{left:`${Math.round(50+A*50)}%`,top:`${Math.round(50+L*50)}%`}}function E(b,A){const L=A.x-b.x,te=A.y-b.y;return Math.sqrt(L*L+te*te)}function W(b,A){const L=2*Math.atan2(A.y-b.y-E(b,A),A.x-b.x);return Math.abs(L*180/Math.PI)}function I(b){u.value===null&&(u.value=b),o.value=b,F(b)}function U(b){var Re,_e;if(b.preventDefault(),!l.value&&b.type!=="click"||!i.value)return;const{width:A,top:L,left:te}=(Re=i.value)==null?void 0:Re.getBoundingClientRect(),{width:C}=((_e=a.value)==null?void 0:_e.getBoundingClientRect())??{width:0},{clientX:N,clientY:Z}="touches"in b?b.touches[0]:b,le={x:A/2,y:-A/2},ce={x:N-te,y:L-Z},Ce=Math.round(W(le,ce)-e.rotate+360)%360,Ve=e.double&&E(le,ce)<(C+C*$.value)/4,Q=Math.ceil(15/T.value);let Ee;for(let g=0;g<Q;g++)if(Ee=ee(Ce+g*T.value,Ve),S(Ee)||(Ee=ee(Ce-g*T.value,Ve),S(Ee)))return I(Ee)}function ge(b){e.disabled||(b.preventDefault(),window.addEventListener("mousemove",U),window.addEventListener("touchmove",U),window.addEventListener("mouseup",ye),window.addEventListener("touchend",ye),u.value=null,o.value=null,l.value=!0,U(b))}function ye(b){b.stopPropagation(),Me(),l.value=!1,o.value!==null&&S(o.value)&&n("change",o.value)}function Me(){window.removeEventListener("mousemove",U),window.removeEventListener("touchmove",U),window.removeEventListener("mouseup",ye),window.removeEventListener("touchend",ye)}ra(Me),De(()=>m("div",{class:ve([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:ge,onTouchstart:ge,onWheel:v,ref:i},[m("div",{class:"v-time-picker-clock__inner",ref:a},[m("div",{class:ve([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":_(e.modelValue)},c.value]),style:Ke([{transform:`rotate(${e.rotate+T.value*(V.value-e.min)}deg) scaleY(${Y(V.value)})`},x.value])},null),f.value.map(b=>{const A=b===V.value;return m("div",{class:ve([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":A,"v-time-picker-clock__item--disabled":e.disabled||!S(b)},A&&M.value]),style:Ke([k(b),A&&D.value])},[m("span",null,[e.format(b)])])})])]))}}),Ha=he({active:Boolean,color:String,disabled:Boolean,label:String,modelValue:String,readonly:Boolean},"VTimePickerField"),it=we()({name:"VTimePickerField",inheritAttrs:!1,props:Ha(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,attrs:i}=t;const{textColorClasses:a,textColorStyles:s}=ut(()=>e.color),l=X(),u=Te(!1);function o(h){if(["Backspace","Delete"].includes(h.key)){h.preventDefault();const c=h.target;c.value="",n("update:modelValue",null)}}return De(()=>m("div",null,[r(Ae,q({ref:l,_as:"VTimePickerField",autocomplete:"off",class:["v-time-picker-controls__time__field",{"v-time-picker-controls__time__field--active":e.active},e.active?a.value:[]],style:e.active?s.value:[],disabled:e.disabled,variant:"solo-filled",inputmode:"numeric",hideDetails:!0,flat:!0,modelValue:e.modelValue??(u.value?"":"--"),"onUpdate:modelValue":h=>n("update:modelValue",h),onKeydown:o,onFocus:()=>u.value=!0,onBlur:()=>u.value=!1},i),null),m("div",{class:"v-time-picker-controls__field-label"},[e.label])])),At({},l)}});function Fe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")}function Ht(e){return e?(e-1)%12+1:12}function st(e,t){return e%12+(t==="pm"?12:0)}function ze(e){const t=e.replaceAll(/\D/g,"");return t.length>0?Number(t):null}function $a(e,t,n){if(n){if(e===12&&t)return{value:1};if(e===11&&t)return{value:12,togglePeriod:!0};if(e===12&&!t)return{value:11,togglePeriod:!0};if(e===1&&!t)return{value:12}}else{if(e===23&&t)return{value:0};if(e===0&&!t)return{value:23}}return{value:e+(t?1:-1)}}function _t(e,t){return e===59&&t?0:e===0&&!t?59:e+(t?1:-1)}const ja=he({ampm:Boolean,color:String,disabled:Boolean,hour:[Number,String],minute:[Number,String],second:[Number,String],period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),It=we()({name:"VTimePickerControls",props:ja(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0,"update:hour":e=>!0,"update:minute":e=>!0,"update:second":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:a}=$e(),s={in:f=>{if(f==null||isNaN(Number(f)))return null;const F=Number(f);return e.ampm?Fe(Ht(F)):Fe(F)},out:f=>{if(isNaN(Number(f))||f==null||f==="")return null;const F=typeof f=="string"?ze(f):Number(f);return F===null?null:e.ampm?st(F,e.period??"am"):pt(F,0,23)}},l=ae(e,"hour",void 0,s.in,s.out),u={in:f=>f!=null&&!isNaN(Number(f))?Fe(`${f}`):null,out:f=>{if(isNaN(Number(f))||f==null||f==="")return null;const F=typeof f=="string"?ze(f):Number(f);return F!==null?pt(F,0,59):null}},o=ae(e,"minute",void 0,u.in,u.out),h=ae(e,"second",void 0,u.in,u.out);function c(f){if(!["ArrowUp","ArrowDown"].includes(f.key))return;f.preventDefault(),f.stopPropagation();const F=Number(l.value??0),S=e.ampm?e.period??"am":null,{value:v,togglePeriod:_}=$a(F,f.key==="ArrowUp",S);l.value=Fe(v),_&&n("update:period",e.period==="am"?"pm":"am")}function x(f){["ArrowUp","ArrowDown"].includes(f.key)&&(f.preventDefault(),f.stopPropagation(),o.value=_t(Number(o.value),f.key==="ArrowUp"))}function M(f){["ArrowUp","ArrowDown"].includes(f.key)&&(f.preventDefault(),f.stopPropagation(),h.value=_t(Number(h.value),f.key==="ArrowUp"))}function D(f,F,S){return v=>{if(!v.data)return;const _=v.target,{value:Y,selectionStart:R,selectionEnd:ee}=_??{};if(ze(v.data)===null){v.preventDefault();return}const k=Y?Y.slice(0,R)+v.data+Y.slice(ee):v.data;if(k.length>2){if(R===ee&&ee===0&&v.data.trim().startsWith("0")){v.preventDefault(),_.value=k.trim().substring(0,2),S(_.value),v.data.trim().length===1&&_.setSelectionRange(1,1);return}if(R===ee&&ee===1&&Y.startsWith("0")){v.preventDefault(),_.value=k.trim().substring(0,2),S(_.value);return}const W=e.viewMode==="hour"?e.ampm?12:23:59;if(ze(k)>W){v.preventDefault(),_.value=Fe(String(ze(v.data)).substring(0,2)),S(_.value);return}}const E=f(k);F(E)&&v.preventDefault()}}const z=X(),p=X(),T=X();de(()=>e.viewMode,(f,F)=>{switch(F){case"hour":z.value.blur();break;case"minute":p.value.blur();break;case"second":T.value.blur();break}});const y=D(s.out,f=>s.in(f)===l.value,f=>l.value=f),V=D(u.out,f=>u.in(f)===o.value,f=>o.value=f),$=D(u.out,f=>u.in(f)===h.value,f=>h.value=f);return De(()=>m("div",{class:"v-time-picker-controls"},[m("div",{class:ve({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-ampm":e.ampm,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[r(it,{ref:z,active:e.viewMode==="hour",color:e.color,disabled:e.disabled,label:a("$vuetify.timePicker.hour"),modelValue:l.value,"onUpdate:modelValue":f=>l.value=f,onKeydown:c,onBeforeinput:y,onFocus:()=>n("update:viewMode","hour")},null),m("span",{class:"v-time-picker-controls__time__separator"},[w(":")]),r(it,{ref:p,active:e.viewMode==="minute",color:e.color,disabled:e.disabled,label:a("$vuetify.timePicker.minute"),modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,onKeydown:x,onBeforeinput:V,onFocus:()=>n("update:viewMode","minute")},null),e.useSeconds&&m("span",{key:"secondsDivider",class:"v-time-picker-controls__time__separator"},[w(":")]),e.useSeconds&&r(it,{key:"secondsVal",ref:T,active:e.viewMode==="second",color:e.color,disabled:e.disabled,label:a("$vuetify.timePicker.second"),modelValue:h.value,"onUpdate:modelValue":f=>h.value=f,onKeydown:M,onBeforeinput:$,onFocus:()=>n("update:viewMode","second")},null),e.ampm&&m("div",{class:"v-time-picker-controls__ampm"},[r(O,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:ve({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:a("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),r(O,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:ve({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:a("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])),{}}}),za=Ge(24),$t=Ge(12),Wa=$t.map(e=>e+12);Ge(60);const Ja=he({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:e=>["am","pm"].includes(e)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,variant:{type:String,default:"dial"},...Se(ct({title:"$vuetify.timePicker.title"}),["landscape"]),...da()},"VTimePicker"),Pt=we()({name:"VTimePicker",props:Ja(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:a}=$e(),{densityClasses:s}=sa(e),l=X(null),u=X(null),o=X(null),h=X(null),c=X(null),x=X(null),M=ae(e,"period","am"),D=ae(e,"viewMode","hour"),z=X(null),p=X(null),T=P(()=>{let k;if(e.allowedHours instanceof Array?k=I=>e.allowedHours.includes(I):k=e.allowedHours,!e.min&&!e.max)return k;const E=e.min?Number(e.min.split(":")[0]):0,W=e.max?Number(e.max.split(":")[0]):23;return I=>I>=Number(E)&&I<=Number(W)&&(!k||k(I))}),y=P(()=>{let k;const E=!T.value||l.value===null||T.value(l.value);if(e.allowedMinutes instanceof Array?k=b=>e.allowedMinutes.includes(b):k=e.allowedMinutes,!e.min&&!e.max)return E?k:()=>!1;const[W,I]=e.min?e.min.split(":").map(Number):[0,0],[U,ge]=e.max?e.max.split(":").map(Number):[23,59],ye=W*60+Number(I),Me=U*60+Number(ge);return b=>{const A=60*l.value+b;return A>=ye&&A<=Me&&E&&(!k||k(b))}}),V=P(()=>{let k;const W=(!T.value||l.value===null||T.value(l.value))&&(!y.value||u.value===null||y.value(u.value));if(e.allowedSeconds instanceof Array?k=te=>e.allowedSeconds.includes(te):k=e.allowedSeconds,!e.min&&!e.max)return W?k:()=>!1;const[I,U,ge]=e.min?e.min.split(":").map(Number):[0,0,0],[ye,Me,b]=e.max?e.max.split(":").map(Number):[23,59,59],A=I*3600+U*60+Number(ge||0),L=ye*3600+Me*60+Number(b||0);return te=>{const C=3600*l.value+60*u.value+te;return C>=A&&C<=L&&W&&(!k||k(te))}}),$=P(()=>e.format==="ampm"),f=Ne(()=>e.modelValue!==null&&l.value===null&&u.value===null&&(!e.useSeconds||o.value===null));function F(){const k=S();k!==null&&k!==e.modelValue&&n("update:modelValue",k),f.value&&n("update:modelValue",null)}de(l,F),de(u,F),de(o,F),de(()=>e.period,k=>Y(k)),de(()=>e.modelValue,k=>v(k)),de(()=>e.useSeconds,(k,E)=>{E&&!k&&D.value==="second"&&(D.value="minute"),!k&&o.value!==null&&(o.value=null)}),ua(()=>{v(e.modelValue)});function S(){return l.value!=null&&u.value!=null&&(!e.useSeconds||o.value!=null)?`${Fe(l.value)}:${Fe(u.value)}`+(e.useSeconds?`:${Fe(o.value)}`:""):null}function v(k){if(k==null||k==="")l.value=null,u.value=null,o.value=null;else if(k instanceof Date)l.value=k.getHours(),u.value=k.getMinutes(),o.value=k.getSeconds();else{const[E,,W,,I,U]=k.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);l.value=U?st(parseInt(E,10),U):parseInt(E,10),u.value=parseInt(W,10),o.value=parseInt(I||0,10)}M.value=l.value==null||l.value<12?"am":"pm"}function _(k,E){const W=T.value;if(!W)return E;const I=$.value?E<12?$t:Wa:za;return((I.find(ge=>W((ge+E)%I.length+I[0]))||0)+E)%I.length+I[0]}function Y(k){if(M.value=k,l.value!=null){const E=l.value+(M.value==="am"?-12:12);l.value=_("hour",E)}return n("update:period",k),F(),!0}function R(k){D.value==="hour"?l.value=$.value?st(k,M.value):k:D.value==="minute"?u.value=k:o.value=k}function ee(k){switch(D.value||"hour"){case"hour":n("update:hour",k);break;case"minute":n("update:minute",k);break;case"second":n("update:second",k);break}const E=l.value!==null&&u.value!==null&&(e.useSeconds?o.value!==null:!0);D.value==="hour"?D.value="minute":e.useSeconds&&D.value==="minute"&&(D.value="second"),!(l.value===h.value&&u.value===c.value&&(!e.useSeconds||o.value===x.value)||S()===null)&&(h.value=l.value,c.value=u.value,e.useSeconds&&(x.value=o.value),E&&F())}De(()=>{const k=Se(tt.filterProps(e),["hideHeader"]),E=It.filterProps(e),W=Mt.filterProps(Se(e,["format","modelValue","min","max"]));return r(tt,q(k,{color:void 0,class:["v-time-picker",`v-time-picker--variant-${e.variant}`,e.class,s.value],hideHeader:e.hideHeader&&e.variant!=="input",style:e.style}),{title:()=>{var I;return((I=i.title)==null?void 0:I.call(i))??m("div",{class:"v-time-picker__title"},[a(e.title)])},header:()=>r(It,q(E,{ampm:$.value,hour:l.value,minute:u.value,period:M.value,second:o.value,viewMode:D.value,"onUpdate:hour":I=>l.value=I,"onUpdate:minute":I=>u.value=I,"onUpdate:period":I=>Y(I),"onUpdate:second":I=>o.value=I,"onUpdate:viewMode":I=>D.value=I,ref:z}),null),default:()=>r(Mt,q(W,{allowedValues:D.value==="hour"?T.value:D.value==="minute"?y.value:V.value,double:D.value==="hour"&&!$.value,format:D.value==="hour"?$.value?Ht:I=>I:I=>Fe(I,2),max:D.value==="hour"?$.value&&M.value==="am"?11:23:59,min:D.value==="hour"&&$.value&&M.value==="pm"?12:0,size:20,step:D.value==="hour"?1:5,modelValue:D.value==="hour"?l.value:D.value==="minute"?u.value:o.value,onChange:ee,onInput:R,ref:p}),null),actions:i.actions})})}}),Ka={name:"ExamConfigEditor",props:{configId:{type:String,required:!0},dialogMode:{type:Boolean,default:!1}},emits:["saved","error","opened","deleted"],data(){return{localConfig:{examName:"",message:"",room:"",examInfos:[]},loading:!1,saving:!1,deleting:!1,deleteDialog:!1,error:"",success:"",isEditMode:!1,showJsonPreview:!1,availableSubjects:[],customSubjectInput:"",enableCustomAlertTime:!1,defaultExamTips:["请保持卷面整洁，字迹清晰，诚信应考。在听到终考铃时立刻起立，停止作答。","沉着 冷静 细心 守记","答题不守记，自己两行泪。"]}},computed:{formattedJson(){try{return JSON.stringify(this.localConfig,null,2)}catch(e){return console.error("格式化JSON时出错:",e),"无效的JSON格式"}},formattedStorageJson(){try{const e={examName:this.localConfig.examName,message:this.localConfig.message,room:this.localConfig.room,examInfos:this.localConfig.examInfos.map(t=>({name:t.name,start:this.formatDisplayDateTime(t.start),end:this.formatDisplayDateTime(t.end),alertTime:parseInt(t.alertTime)||15}))};return JSON.stringify(e,null,2)}catch(e){return console.error("格式化存储JSON时出错:",e),"无效的JSON格式"}},isValidConfig(){return this.localConfig.examName&&this.localConfig.message&&this.localConfig.examInfos&&this.localConfig.examInfos.length>0&&this.localConfig.examInfos.every(e=>e.name&&e.start&&e.end)},validationErrors(){const e=[];if((!this.localConfig.examName||this.localConfig.examName.trim()==="")&&e.push("考试名称不能为空"),(!this.localConfig.message||this.localConfig.message.trim()==="")&&e.push("考试提示不能为空"),!this.localConfig.examInfos||this.localConfig.examInfos.length===0)e.push("至少需要添加一个考试科目");else{this.localConfig.examInfos.forEach((t,n)=>{const i=`第${n+1}个科目`;if((!t.name||t.name.trim()==="")&&e.push(`${i}的名称不能为空`),t.start||e.push(`${i}的开始时间不能为空`),t.end||e.push(`${i}的结束时间不能为空`),t.start&&t.end){const a=new Date(t.start),s=new Date(t.end);isNaN(a.getTime())&&e.push(`${i}的开始时间格式不正确`),isNaN(s.getTime())&&e.push(`${i}的结束时间格式不正确`),!isNaN(a.getTime())&&!isNaN(s.getTime())&&(s<=a&&e.push(`${i}的结束时间必须晚于开始时间`),(s-a)/(1e3*60*60)>24&&e.push(`${i}的考试时长不能超过24小时`))}});for(let t=0;t<this.localConfig.examInfos.length;t++)for(let n=t+1;n<this.localConfig.examInfos.length;n++){const i=this.localConfig.examInfos[t],a=this.localConfig.examInfos[n];if(i.start&&i.end&&a.start&&a.end){const s=new Date(i.start),l=new Date(i.end),u=new Date(a.start),o=new Date(a.end);!isNaN(s.getTime())&&!isNaN(l.getTime())&&!isNaN(u.getTime())&&!isNaN(o.getTime())&&s<o&&l>u&&e.push(`第${t+1}个科目与第${n+1}个科目的时间有重叠`)}}}return e},hasValidationErrors(){return this.validationErrors.length>0}},watch:{configId:{immediate:!0,handler(e){e&&this.loadConfig()}}},created(){this.loadSubjects()},methods:{async loadSubjects(){try{const e=await Be.loadData("classworks-config-subject");e&&Array.isArray(e)?this.availableSubjects=e.sort((t,n)=>(t.order??0)-(n.order??0)).map(t=>({name:t.name,order:t.order??0})):this.availableSubjects=[{name:"语文",order:0},{name:"数学",order:1},{name:"英语",order:2},{name:"物理",order:3},{name:"化学",order:4},{name:"生物",order:5},{name:"政治",order:6},{name:"历史",order:7},{name:"地理",order:8}]}catch(e){console.warn("加载科目列表失败，使用默认列表:",e),this.availableSubjects=[{name:"语文",order:0},{name:"数学",order:1},{name:"英语",order:2},{name:"物理",order:3},{name:"化学",order:4},{name:"生物",order:5},{name:"政治",order:6},{name:"历史",order:7},{name:"地理",order:8}]}},autoFillRemaining(){if(this.localConfig.examInfos.length===0)return;let e=null;for(let t=this.localConfig.examInfos.length-1;t>=0;t--)if(this.localConfig.examInfos[t].end){e=new Date(this.localConfig.examInfos[t].end);break}e||(e=new Date);for(let t=0;t<this.localConfig.examInfos.length;t++){const n=this.localConfig.examInfos[t];if(n.end){e=new Date(n.end);continue}const i=new Date(e.getTime()+10*60*1e3),a=new Date(i.getTime()+2*60*60*1e3);n.start=this.formatDateTimeLocal(i),n.startDate=i,n.startTime=this.formatTimeOnly(i),n.startFormatted=this.formatDisplayDateTime(i),n.end=this.formatDateTimeLocal(a),n.endDate=a,n.endTime=this.formatTimeOnly(a),n.endFormatted=this.formatDisplayDateTime(a),e=a}this.success="已自动填充所有科目的时间（间隔10分钟）"},validateTimeFormat(e,t){if(!e)return!0;const n=e.match(/(\d{4})[\/\-](\d{1,2})[\/\-](\d{1,2})\s+(\d{1,2}):(\d{1,2})/);if(!n)return`${t}格式不正确，请使用格式：2025/01/01 09:00`;const[,i,a,s,l,u]=n,o=parseInt(i),h=parseInt(a),c=parseInt(s),x=parseInt(l),M=parseInt(u);if(h<1||h>12)return`${t}月份不合法（1-12）`;if(c<1||c>31)return`${t}日期不合法（1-31）`;if(x<0||x>23)return`${t}小时不合法（0-23）`;if(M<0||M>59)return`${t}分钟不合法（0-59）`;const D=new Date(o,h-1,c,x,M);return isNaN(D.getTime())?`${t}日期不存在`:D.getMonth()!==h-1||D.getDate()!==c?`${t}日期不存在`:!0},validateEndAfterStart(e){if(!e.startFormatted||!e.endFormatted)return!0;try{const t=new Date(e.start||e.startFormatted.replace(/\//g,"-")),n=new Date(e.end||e.endFormatted.replace(/\//g,"-"));return isNaN(t.getTime())||isNaN(n.getTime())?!0:n<=t?"结束时间必须晚于开始时间":(n.getTime()-t.getTime())/(1e3*60*60)>24?"考试时长不能超过24小时":!0}catch{return!0}},validateNoTimeOverlap(e,t){if(!e.startFormatted||!e.endFormatted)return!0;try{const n=new Date(e.start||e.startFormatted.replace(/\//g,"-")),i=new Date(e.end||e.endFormatted.replace(/\//g,"-"));if(isNaN(n.getTime())||isNaN(i.getTime()))return!0;for(let a=0;a<this.localConfig.examInfos.length;a++){if(a===t)continue;const s=this.localConfig.examInfos[a];if(!s.start||!s.end)continue;const l=new Date(s.start),u=new Date(s.end);if(isNaN(l.getTime())||isNaN(u.getTime()))continue;if(n>=l&&n<u||i>l&&i<=u||n<=l&&i>=u)return`时间与"${s.name||`第${a+1}个科目`}"重叠`}return!0}catch{return!0}},toggleAlertTimeMode(){this.enableCustomAlertTime||this.localConfig.examInfos.forEach(e=>{e.alertTime=15})},getExamDuration(e){if(!e.start||!e.end)return"";try{const t=new Date(e.start),n=new Date(e.end);if(isNaN(t.getTime())||isNaN(n.getTime()))return"";const i=n.getTime()-t.getTime(),a=Math.round(i/(1e3*60));if(a<60)return`${a}分钟`;const s=Math.floor(a/60),l=a%60;return l===0?`${s}小时`:`${s}小时${l}分钟`}catch{return""}},updateStartDateTimeFromInput(e){if(e===void 0||!this.localConfig.examInfos[e])return;const t=this.localConfig.examInfos[e],n=t.startFormatted;if(!n)return;const i=n.match(/(\d{4})[\/\-](\d{1,2})[\/\-](\d{1,2})\s+(\d{1,2}):(\d{1,2})/);if(!i)return;const[,a,s,l,u,o]=i,h=new Date(parseInt(a),parseInt(s)-1,parseInt(l),parseInt(u),parseInt(o));isNaN(h.getTime())||(t.startDate=h,t.startTime=this.formatTimeOnly(h),t.start=this.formatDateTimeLocal(h),this.updateStartDateTime(e))},updateEndDateTimeFromInput(e){if(e===void 0||!this.localConfig.examInfos[e])return;const t=this.localConfig.examInfos[e],n=t.endFormatted;if(!n)return;const i=n.match(/(\d{4})[\/\-](\d{1,2})[\/\-](\d{1,2})\s+(\d{1,2}):(\d{1,2})/);if(!i)return;const[,a,s,l,u,o]=i,h=new Date(parseInt(a),parseInt(s)-1,parseInt(l),parseInt(u),parseInt(o));isNaN(h.getTime())||(t.endDate=h,t.endTime=this.formatTimeOnly(h),t.end=this.formatDateTimeLocal(h),this.updateEndDateTime(e))},async loadConfig(){var e;this.loading=!0,this.error="";try{const t=await Be.loadData(`es_${this.configId}`);if(t){this.localConfig={examName:"",message:"",room:"",examInfos:[],...t},Array.isArray(this.localConfig.examInfos)||(this.localConfig.examInfos=[]),this.localConfig.examInfos.forEach(i=>{if(i.start){const a=this.parseDateTime(i.start);i.start=this.formatDateTimeLocal(a),i.startDate=a,i.startTime=this.formatTimeOnly(a),i.startFormatted=this.formatDisplayDateTime(a),i.startDateMenu=!1}if(i.end){const a=this.parseDateTime(i.end);i.end=this.formatDateTimeLocal(a),i.endDate=a,i.endTime=this.formatTimeOnly(a),i.endFormatted=this.formatDisplayDateTime(a),i.endDateMenu=!1}try{if(i.start&&i.end){const a=new Date(i.start),s=new Date(i.end),l=Math.round((s.getTime()-a.getTime())/(1e3*60));l>0&&l<=24*60?i.durationMinutes=l:i.durationMinutes=120}else i.durationMinutes=120}catch{i.durationMinutes=120}i.alertTime===void 0||i.alertTime===null?i.alertTime=15:i.alertTime=parseInt(i.alertTime)||15});const n=this.localConfig.examInfos.some(i=>i.alertTime!==15);this.enableCustomAlertTime=n}else console.error("加载配置失败:",t),this.error="加载配置失败: "+(((e=t.error)==null?void 0:e.message)||"未知错误"),this.$emit("error",this.error)}catch(t){console.error(t),this.error="加载配置失败: "+t.message,this.$emit("error",this.error)}finally{this.loading=!1}},async saveConfig(){var e;if(!this.isValidConfig){const t=this.validationErrors;return t.length>0?this.error=`配置验证失败：${t.join("；")}`:this.error="请填写完整的配置信息",!1}this.saving=!0,this.error="";try{const t={examName:this.localConfig.examName,message:this.localConfig.message,room:this.localConfig.room,examInfos:this.localConfig.examInfos.map(i=>({name:i.name,start:this.formatDisplayDateTime(i.start),end:this.formatDisplayDateTime(i.end),alertTime:parseInt(i.alertTime)||15}))},n=await Be.saveData(`es_${this.configId}`,t);return n?(this.success="配置保存成功",this.$emit("saved",t),!0):(this.error="保存配置失败: "+(((e=n.error)==null?void 0:e.message)||"未知错误"),this.$emit("error",this.error),!1)}catch(t){return this.error="保存配置失败: "+t,this.$emit("error",this.error),!1}finally{this.saving=!1}},addExamInfo(){let e=new Date;if(this.localConfig.examInfos.length>0){const a=this.localConfig.examInfos[this.localConfig.examInfos.length-1];a.end&&(e=new Date(a.end))}const t=new Date(e.getTime()+10*60*1e3),n=new Date(t.getTime()+2*60*60*1e3),i={name:"",start:this.formatDateTimeLocal(t),end:this.formatDateTimeLocal(n),durationMinutes:120,alertTime:15,startDate:t,startTime:this.formatTimeOnly(t),startFormatted:this.formatDisplayDateTime(t),startDateMenu:!1,endDate:n,endTime:this.formatTimeOnly(n),endFormatted:this.formatDisplayDateTime(n),endDateMenu:!1};this.localConfig.examInfos.push(i)},removeExamInfo(e){this.localConfig.examInfos.splice(e,1)},moveExamInfo(e,t){const n=e+t;if(n>=0&&n<this.localConfig.examInfos.length){const i=this.localConfig.examInfos.splice(e,1)[0];this.localConfig.examInfos.splice(n,0,i)}},async copyToClipboard(){try{await navigator.clipboard.writeText(this.formattedStorageJson),this.$message.success("配置已复制到剪贴板")}catch(e){this.error="复制失败: "+e.message}},downloadAsJson(){var e;try{const t=new Blob([this.formattedStorageJson],{type:"application/json"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=`${this.localConfig.examName||"exam-config"}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),(e=this.$message)==null||e.success("已下载 JSON 文件")}catch(t){this.error="下载失败: "+t.message}},downloadAsEa2(){var e;try{const t=new Blob([this.formattedStorageJson],{type:"application/json"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=`${this.localConfig.examName||"exam-config"}.ea2`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),(e=this.$message)==null||e.success("已下载 ExamAware2 知试 （.ea2）文件")}catch(t){this.error="下载失败: "+t.message}},async copyConfigUrl(){try{const e=await Be.getKeyCloudUrl(`es_${this.configId}`,{autoMigrate:!0,autoConfig:!0});if(e.success&&e.url)await navigator.clipboard.writeText(e.url),this.$message.success("云端地址已复制到剪贴板");else throw new Error(e.error||"获取云端地址失败")}catch(e){this.error="复制链接失败: "+e.message}},toggleEditMode(){this.isEditMode=!this.isEditMode,this.error="",this.success=""},quickEdit(){this.isEditMode=!0,this.error="",this.success=""},selectDefaultTip(e){this.localConfig.message&&this.localConfig.message.trim()!==""?this.localConfig.message+=`
`+e:this.localConfig.message=e},durationHint(e){const t=parseInt(e==null?void 0:e.durationMinutes);if(isNaN(t)||t<=0)return"";if(t<60)return`${t} 分钟`;const n=Math.floor(t/60),i=t%60;return i===0?`${n} 小时`:`${n} 小时 ${i} 分钟`},updateDurationFromInput(e){const t=this.localConfig.examInfos[e];let n=parseInt(t.durationMinutes);if((isNaN(n)||n<=0)&&(n=120),n>24*60&&(n=24*60),t.durationMinutes=n,(!t.startDate||!t.startTime)&&t.start){const i=new Date(t.start);isNaN(i.getTime())||(t.startDate=i,t.startTime=this.formatTimeOnly(i))}if(t.startDate&&t.startTime){const i=new Date(t.startDate),[a,s]=String(t.startTime).split(":");i.setHours(parseInt(a),parseInt(s),0,0);const l=new Date(i.getTime()+n*60*1e3);t.endDate=l,t.endTime=this.formatTimeOnly(l),t.end=this.formatDateTimeLocal(l),t.endFormatted=this.formatDisplayDateTime(l)}},formatDateTimeLocal(e){if(!e)return"";let t;if(typeof e=="string"?e.includes("/")?t=new Date(e.replace(/\//g,"-")):t=new Date(e):t=new Date(e),isNaN(t.getTime()))return"";const n=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${n}-${i}-${a}T${s}:${l}`},formatDisplayDateTime(e){if(!e)return"";const t=new Date(e);if(isNaN(t.getTime()))return e;const n=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${n}/${i}/${a} ${s}:${l}`},parseDateTime(e){return e?typeof e=="string"?e.includes("/")?new Date(e.replace(/\//g,"-")):new Date(e):new Date(e):new Date},formatTimeOnly(e){if(!e)return"00:00";const t=new Date(e);if(isNaN(t.getTime()))return"00:00";const n=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${n}:${i}`},updateStartDateTime(e){const t=this.localConfig.examInfos[e];if(!t.startDate||!t.startTime)return;const n=new Date(t.startDate),[i,a]=t.startTime.split(":");n.setHours(parseInt(i),parseInt(a),0,0),t.start=this.formatDateTimeLocal(n),t.startFormatted=this.formatDisplayDateTime(n);let s=parseInt(t.durationMinutes);if(isNaN(s)||s<=0||s>24*60)try{let u=null;if(t.endDate&&t.endTime){u=new Date(t.endDate);const[o,h]=String(t.endTime).split(":");u.setHours(parseInt(o),parseInt(h),0,0)}else t.end&&(u=new Date(t.end));if(u&&!isNaN(u.getTime())){const o=Math.round((u.getTime()-n.getTime())/6e4);o>0&&o<=24*60&&(s=o)}}catch{}(isNaN(s)||s<=0||s>24*60)&&(s=120);const l=new Date(n.getTime()+s*60*1e3);t.endDate=l,t.endTime=this.formatTimeOnly(l),t.end=this.formatDateTimeLocal(l),t.endFormatted=this.formatDisplayDateTime(l),t.durationMinutes=s},updateEndDateTime(e){const t=this.localConfig.examInfos[e];if(!t.endDate||!t.endTime)return;const n=new Date(t.endDate),[i,a]=t.endTime.split(":");n.setHours(parseInt(i),parseInt(a),0,0),t.end=this.formatDateTimeLocal(n),t.endFormatted=this.formatDisplayDateTime(n);try{if(t.startDate&&t.startTime){const s=new Date(t.startDate),[l,u]=String(t.startTime).split(":");s.setHours(parseInt(l),parseInt(u),0,0);const o=Math.round((n.getTime()-s.getTime())/(1e3*60));o>0&&o<=24*60&&(t.durationMinutes=o)}}catch{}},async openConfig(){try{const e=await Be.getKeyCloudUrl(`es_${this.configId}`,{autoMigrate:!0,autoConfig:!0});if(e.success&&e.url){const t=`https://es.examaware.tech/exam/?configUrl=${encodeURIComponent(e.url)}`;window.open(t,"_blank"),this.success="配置已在新窗口中打开",this.$emit("opened",{configId:this.configId,url:e.url})}else throw new Error(e.error||"获取云端地址失败")}catch(e){this.error="打开配置失败: "+e.message,this.$emit("error","打开配置失败: "+e.message)}},confirmDelete(){this.deleteDialog=!0},async deleteConfig(){this.deleting=!0;try{const n=(await Be.loadData("es_list")||[]).filter(a=>a.id!==this.configId);if(!await Be.saveData("es_list",n))throw new Error("更新云端列表失败");this.deleteDialog=!1,this.$emit("deleted",{success:!0,message:"配置删除成功",configId:this.configId})}catch(e){console.error("删除配置失败:",e),this.$emit("deleted",{success:!1,message:"删除失败: "+e.message})}finally{this.deleting=!1}}}},qa={class:"d-flex align-center"},Ga={class:"d-flex align-center"},Xa={key:4,class:"d-flex justify-space-between align-center mb-4"},Qa={class:"d-flex align-center gap-2"},Za={key:5},el={class:"mb-8"},tl={class:"text-h3 font-weight-bold",style:{"line-height":"1.2"}},al={class:"text-subtitle-1 text-grey",style:{"white-space":"pre-wrap","line-height":"1.8"}},ll={key:0,class:"mb-8"},nl={class:"d-flex align-center"},il={class:""},rl={class:"mb-3"},ol={class:"d-flex align-center mb-1"},sl={class:"text-h6 font-weight-medium text-success"},ul={class:"d-flex align-center mb-1"},dl={class:"text-h6 font-weight-medium text-error"},cl={key:1,class:"text-center py-12"},ml={class:"json-preview"},fl={key:6},vl={class:"text-subtitle-2 font-weight-bold d-block mb-2"},hl={key:0,class:"mt-3"},gl={class:"text-caption text-medium-emphasis mt-2 ml-2"},yl={class:"d-flex align-center mr-4"},kl={class:"w-100"},bl={class:"d-flex align-center mb-3"},pl={class:"d-flex gap-1"},wl={class:"text-primary font-weight-bold"},Dl={key:1,class:"text-center py-12"};function Cl(e,t,n,i,a,s){return H(),be("div",null,[a.error?(H(),ie(nt,{key:0,border:"start",class:"mb-4 mt-3 mx-2",closable:"",type:"error",variant:"tonal","onClick:close":t[0]||(t[0]=l=>a.error="")},{default:d(()=>[m("div",qa,[r(K,{class:"mr-2"},{default:d(()=>[...t[10]||(t[10]=[w("mdi-alert-circle",-1)])]),_:1}),w(" "+se(a.error),1)])]),_:1})):oe("",!0),a.success?(H(),ie(nt,{key:1,border:"start",class:"mb-4 mt-3 mx-2",closable:"",type:"success",variant:"tonal","onClick:close":t[1]||(t[1]=l=>a.success="")},{default:d(()=>[m("div",Ga,[r(K,{class:"mr-2"},{default:d(()=>[...t[11]||(t[11]=[w("mdi-check-circle",-1)])]),_:1}),w(" "+se(a.success),1)])]),_:1})):oe("",!0),s.hasValidationErrors&&!a.loading?(H(),ie(nt,{key:2,border:"start",class:"mb-4 mt-3 mx-2",type:"warning",variant:"tonal"},{default:d(()=>[t[13]||(t[13]=m("div",{class:"d-flex align-center"},[m("span",{class:"font-weight-bold"},"配置验证失败，请检查以下问题：")],-1)),r(rt,{class:"bg-transparent",density:"compact"},{default:d(()=>[(H(!0),be(pe,null,Qe(s.validationErrors,(l,u)=>(H(),ie(We,{key:u,class:"px-0 py-0"},{prepend:d(()=>[r(K,{color:"warning",size:"small"},{default:d(()=>[...t[12]||(t[12]=[w("mdi-circle-small",-1)])]),_:1})]),default:d(()=>[r(ma,{class:"text-body-2"},{default:d(()=>[w(se(l),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):oe("",!0),a.loading?(H(),ie(Pe,{key:3,class:"my-4",outlined:""},{default:d(()=>[r(Oe,null,{default:d(()=>[r(ka,{class:"mx-auto",type:"article"})]),_:1})]),_:1})):oe("",!0),a.loading?oe("",!0):(H(),be("div",Xa,[m("div",Qa,[r(O,{disabled:!s.isValidConfig,class:"text-none",color:"success","prepend-icon":"mdi-open-in-new",variant:"elevated",onClick:s.openConfig},{default:d(()=>[...t[14]||(t[14]=[w(" 打开 ExamSchedule ",-1)])]),_:1},8,["disabled","onClick"]),r(O,{disabled:!s.isValidConfig,class:"text-none",color:"primary","prepend-icon":"mdi-link-variant",variant:"elevated",onClick:s.copyConfigUrl},{default:d(()=>[...t[15]||(t[15]=[w(" 复制远程链接 ",-1)])]),_:1},8,["disabled","onClick"]),r(O,{disabled:!s.isValidConfig,class:"text-none",color:"primary","prepend-icon":"mdi-download",variant:"elevated",onClick:s.downloadAsJson},{default:d(()=>[...t[16]||(t[16]=[w(" JSON 文件 ",-1)])]),_:1},8,["disabled","onClick"]),r(O,{disabled:!s.isValidConfig,class:"text-none",color:"primary","prepend-icon":"mdi-download",variant:"elevated",onClick:s.downloadAsEa2},{default:d(()=>[...t[17]||(t[17]=[w(" 部署到 ExamAware2 知试 ",-1)])]),_:1},8,["disabled","onClick"]),s.isValidConfig?oe("",!0):(H(),ie(Ze,{key:0,activator:"parent",location:"bottom"},{default:d(()=>[...t[18]||(t[18]=[m("span",null,"请先完善配置信息后再操作",-1)])]),_:1}))]),r(fa,{modelValue:a.isEditMode,"onUpdate:modelValue":t[2]||(t[2]=l=>a.isEditMode=l),color:"primary",divided:"",variant:"outlined"},{default:d(()=>[r(O,{class:"text-error","prepend-icon":"mdi-delete",onClick:s.confirmDelete},{default:d(()=>[...t[19]||(t[19]=[w(" 删除配置 ",-1)])]),_:1},8,["onClick"]),r(O,{value:!1,"prepend-icon":"mdi-eye"},{default:d(()=>[...t[20]||(t[20]=[w(" 预览",-1)])]),_:1}),r(O,{value:!0,"prepend-icon":"mdi-pencil"},{default:d(()=>[...t[21]||(t[21]=[w(" 编辑",-1)])]),_:1})]),_:1},8,["modelValue"])])),!a.loading&&!a.isEditMode?(H(),be("div",Za,[m("div",el,[m("div",tl,se(a.localConfig.examName||"未设置考试名称"),1),m("div",al,se(a.localConfig.message||"未设置考试提示"),1),a.localConfig.room?(H(),ie(Je,{key:0,class:"px-4 py-2",size:"large"},{default:d(()=>[r(K,{start:""},{default:d(()=>[...t[22]||(t[22]=[w("mdi-home",-1)])]),_:1}),w(" 考场："+se(a.localConfig.room),1)]),_:1})):oe("",!0)]),a.localConfig.examInfos&&a.localConfig.examInfos.length>0?(H(),be("div",ll,[r(He,null,{default:d(()=>[(H(!0),be(pe,null,Qe(a.localConfig.examInfos,(l,u)=>(H(),ie(fe,{key:u,cols:"12",lg:"4",md:"6"},{default:d(()=>[r(Pe,{class:"h-100",hover:"",variant:"tonal"},{default:d(()=>[r(Le,{class:"bg-primary-lighten-5 pa-4"},{default:d(()=>[m("div",nl,[r(K,{class:"mr-2"},{default:d(()=>[...t[23]||(t[23]=[w("mdi-book-open-page-variant",-1)])]),_:1}),m("span",il,se(l.name||"未设置科目"),1)])]),_:2},1024),r(Oe,{class:"pa-4"},{default:d(()=>[m("div",rl,[m("div",ol,[r(K,{class:"mr-2",color:"success",size:"small"},{default:d(()=>[...t[24]||(t[24]=[w("mdi-clock-start ",-1)])]),_:1}),t[25]||(t[25]=m("span",{class:"text-body-2 text-grey-darken-1"},"开始时间",-1))]),m("div",sl,se(l.startFormatted||l.start||"未设置"),1)]),m("div",null,[m("div",ul,[r(K,{class:"mr-2",color:"error",size:"small"},{default:d(()=>[...t[26]||(t[26]=[w("mdi-clock-end ",-1)])]),_:1}),t[27]||(t[27]=m("span",{class:"text-body-2 text-grey-darken-1"},"结束时间",-1))]),m("div",dl,se(l.endFormatted||l.end||"未设置"),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):(H(),be("div",cl,[r(K,{class:"mb-4",color:"grey-lighten-2",size:"80"},{default:d(()=>[...t[28]||(t[28]=[w(" mdi-calendar-blank ",-1)])]),_:1}),t[31]||(t[31]=m("div",{class:"text-h5 text-grey-darken-1 mb-2"},"暂无考试科目安排",-1)),t[32]||(t[32]=m("div",{class:"text-body-1 text-grey mb-4"},' 点击上方"添加科目"按钮开始配置考试时间表 ',-1)),r(O,{color:"primary",variant:"outlined",onClick:s.quickEdit},{default:d(()=>[r(K,{start:""},{default:d(()=>[...t[29]||(t[29]=[w("mdi-plus",-1)])]),_:1}),t[30]||(t[30]=w(" 立即添加 ",-1))]),_:1},8,["onClick"])])),r(Pe,{border:"",class:"mb-4",elevation:"2"},{default:d(()=>[r(Le,{class:"d-flex align-center text-white cursor-pointer",onClick:t[3]||(t[3]=l=>a.showJsonPreview=!a.showJsonPreview)},{default:d(()=>[r(K,{class:"mr-2"},{default:d(()=>[...t[33]||(t[33]=[w("mdi-code-json",-1)])]),_:1}),t[35]||(t[35]=w(" 配置预览 ",-1)),r(Ye),r(O,{color:"white","prepend-icon":"mdi-content-copy",size:"small",variant:"outlined",onClick:va(s.copyToClipboard,["stop"])},{default:d(()=>[...t[34]||(t[34]=[w(" 复制 ",-1)])]),_:1},8,["onClick"]),r(O,{icon:a.showJsonPreview?"mdi-chevron-up":"mdi-chevron-down",class:"ml-2",color:"white",size:"small",variant:"text"},null,8,["icon"])]),_:1}),r(ha,null,{default:d(()=>[Ot(r(Oe,{class:"pa-4"},{default:d(()=>[r(Pe,{class:"pa-4",variant:"tonal"},{default:d(()=>[m("pre",ml,[m("code",null,se(s.formattedStorageJson),1)])]),_:1})]),_:1},512),[[ga,a.showJsonPreview]])]),_:1})]),_:1})])):oe("",!0),!a.loading&&a.isEditMode?(H(),be("div",fl,[r(Pe,{border:"",class:"mb-4",elevation:"1"},{default:d(()=>[r(Le,{class:"d-flex align-center bg-primary-lighten-5 pa-4"},{default:d(()=>[r(K,{class:"mr-2"},{default:d(()=>[...t[36]||(t[36]=[w("mdi-information",-1)])]),_:1}),t[37]||(t[37]=m("span",{class:"font-weight-bold"},"基本信息",-1))]),_:1}),r(Oe,{class:"pa-6"},{default:d(()=>[r(He,null,{default:d(()=>[r(fe,{cols:"12",md:"6"},{default:d(()=>[r(Ae,{modelValue:a.localConfig.examName,"onUpdate:modelValue":t[4]||(t[4]=l=>a.localConfig.examName=l),rules:[l=>!!l||"考试名称不能为空",l=>l&&l.trim().length>0||"考试名称不能为空白字符",l=>!l||l.length<=100||"考试名称不能超过100个字符"],clearable:"",density:"comfortable",label:"考试名称",placeholder:"如：2025年高考模拟考试","prepend-inner-icon":"mdi-calendar-text",required:"",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),r(fe,{cols:"12",md:"6"},{default:d(()=>[r(Ae,{modelValue:a.localConfig.room,"onUpdate:modelValue":t[5]||(t[5]=l=>a.localConfig.room=l),clearable:"",density:"comfortable",label:"考场号（仅 ExamSchedule-Management 支持此配置）",placeholder:"如：一号考场","prepend-inner-icon":"mdi-home",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),r(He,null,{default:d(()=>[r(fe,{cols:"12"},{default:d(()=>[m("span",vl,[r(K,{size:"small",class:"mr-1"},{default:d(()=>[...t[38]||(t[38]=[w("mdi-message-text",-1)])]),_:1}),t[39]||(t[39]=w(" 考试提示 ",-1))]),r(Ca,{modelValue:a.localConfig.message,"onUpdate:modelValue":t[6]||(t[6]=l=>a.localConfig.message=l),rules:[l=>!!l||"考试提示不能为空",l=>l&&l.trim().length>0||"考试提示不能为空白字符"],clearable:"",density:"comfortable",label:"输入考试相关的提示信息...","no-resize":"",placeholder:"例如：请保持卷面整洁，诚信应考。在听到终考铃时立刻停止作答。",rows:"3",variant:"outlined"},null,8,["modelValue","rules"]),!a.localConfig.message||a.localConfig.message.trim()===""?(H(),be("div",hl,[r(pa,{class:"d-flex gap-2",column:""},{default:d(()=>[(H(!0),be(pe,null,Qe(a.defaultExamTips,(l,u)=>(H(),ie(Je,{key:u,class:"cursor-pointer",color:"primary",size:"small",variant:"outlined",onClick:o=>s.selectDefaultTip(l)},{default:d(()=>[r(K,{size:"small",start:""},{default:d(()=>[...t[40]||(t[40]=[w("mdi-plus",-1)])]),_:1}),w(" "+se(l.substring(0,20))+"... ",1)]),_:2},1032,["onClick"]))),128))]),_:1}),m("div",gl,[r(K,{class:"mr-1",size:"x-small"},{default:d(()=>[...t[41]||(t[41]=[w("mdi-lightbulb-outline",-1)])]),_:1}),t[42]||(t[42]=w(" 点击上方选项快速添加常用考试提示 ",-1))])])):oe("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),r(Pe,{border:"",class:"mb-4",elevation:"1"},{default:d(()=>[r(Le,{class:"d-flex align-center bg-success-lighten-5 pa-4"},{default:d(()=>[r(K,{class:"mr-2"},{default:d(()=>[...t[43]||(t[43]=[w("mdi-format-list-bulleted",-1)])]),_:1}),t[46]||(t[46]=m("span",{class:"font-weight-bold"},"考试科目安排",-1)),r(Ye),m("div",yl,[r(Va,{modelValue:a.enableCustomAlertTime,"onUpdate:modelValue":t[7]||(t[7]=l=>a.enableCustomAlertTime=l),color:"primary",density:"compact","hide-details":"",onChange:s.toggleAlertTimeMode},{label:d(()=>[...t[44]||(t[44]=[m("span",{class:"text-body-2"},"自定义提醒时间",-1)])]),_:1},8,["modelValue","onChange"])]),r(O,{color:"success","prepend-icon":"mdi-plus",size:"small",variant:"elevated",onClick:s.addExamInfo},{default:d(()=>[...t[45]||(t[45]=[w(" 添加科目 ",-1)])]),_:1},8,["onClick"])]),_:1}),r(Oe,{class:"pa-0"},{default:d(()=>[a.localConfig.examInfos&&a.localConfig.examInfos.length>0?(H(),ie(rt,{key:0,class:"py-0"},{default:d(()=>[(H(!0),be(pe,null,Qe(a.localConfig.examInfos,(l,u)=>(H(),ie(We,{key:u,class:"border-b pa-4 hover-highlight"},{default:d(()=>[m("div",kl,[m("div",bl,[r(Je,{color:u%2===0?"primary":"secondary",size:"small",variant:"tonal",class:"mr-3"},{default:d(()=>[r(K,{start:"",size:"small"},{default:d(()=>[w("mdi-numeric-"+se(u+1)+"-circle",1)]),_:2},1024),w(" 第 "+se(u+1)+" 科目 ",1)]),_:2},1032,["color"]),r(Ye),m("div",pl,[u>0?(H(),ie(O,{key:0,color:"primary",icon:"mdi-arrow-up",size:"x-small",variant:"text",onClick:o=>s.moveExamInfo(u,-1)},{default:d(()=>[r(Ze,{activator:"parent",location:"bottom"},{default:d(()=>[...t[47]||(t[47]=[w("上移",-1)])]),_:1})]),_:1},8,["onClick"])):oe("",!0),u<a.localConfig.examInfos.length-1?(H(),ie(O,{key:1,color:"primary",icon:"mdi-arrow-down",size:"x-small",variant:"text",onClick:o=>s.moveExamInfo(u,1)},{default:d(()=>[r(Ze,{activator:"parent",location:"bottom"},{default:d(()=>[...t[48]||(t[48]=[w("下移",-1)])]),_:1})]),_:1},8,["onClick"])):oe("",!0),r(O,{color:"error",icon:"mdi-delete",size:"x-small",variant:"text",onClick:o=>s.removeExamInfo(u)},{default:d(()=>[r(Ze,{activator:"parent",location:"bottom"},{default:d(()=>[...t[49]||(t[49]=[w("删除",-1)])]),_:1})]),_:1},8,["onClick"])])]),r(He,{class:"align-start"},{default:d(()=>[r(fe,{cols:"12",md:"4"},{default:d(()=>[r(Ea,{modelValue:l.name,"onUpdate:modelValue":o=>l.name=o,items:a.availableSubjects,rules:[o=>!!o||"科目名称不能为空",o=>o&&o.trim().length>0||"科目名称不能为空白字符"],clearable:"",density:"comfortable","item-title":"name",label:"科目名称","no-data-text":"没有可用科目，请输入自定义名称","prepend-inner-icon":"mdi-book",variant:"outlined"},{"prepend-item":d(()=>[a.customSubjectInput?(H(),ie(We,{key:0,title:"自定义："},{append:d(()=>[m("span",wl,se(a.customSubjectInput),1)]),_:1})):oe("",!0),a.customSubjectInput?(H(),ie(Nt,{key:1})):oe("",!0)]),_:1},8,["modelValue","onUpdate:modelValue","items","rules"])]),_:2},1024),r(fe,{cols:"12",md:"3"},{default:d(()=>[r(ot,{modelValue:l.startDateMenu,"onUpdate:modelValue":o=>l.startDateMenu=o,"close-on-content-click":!1,"min-width":"auto","offset-y":"",transition:"scale-transition"},{activator:d(({props:o})=>[r(Ae,q({modelValue:l.startFormatted,"onUpdate:modelValue":h=>l.startFormatted=h,rules:[h=>!!h||"开始时间不能为空",h=>s.validateTimeFormat(h,"开始时间"),()=>s.validateNoTimeOverlap(l,u)],density:"comfortable",label:"开始时间",placeholder:"2025/01/01 09:00","prepend-inner-icon":"mdi-clock-start"},{ref_for:!0},o,{variant:"outlined",onBlur:h=>s.updateStartDateTimeFromInput(u)}),{append:d(()=>[r(K,null,{default:d(()=>[...t[50]||(t[50]=[w("mdi-calendar-clock",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue","rules","onBlur"])]),default:d(()=>[r(Pe,{"min-width":"500"},{default:d(()=>[r(Le,{class:"text-center py-3 bg-primary-lighten-5"},{default:d(()=>[r(K,{class:"mr-2",color:"primary"},{default:d(()=>[...t[51]||(t[51]=[w("mdi-clock-start",-1)])]),_:1}),t[52]||(t[52]=w(" 选择开始时间 ",-1))]),_:1}),r(Oe,{class:"pa-0"},{default:d(()=>[r(He,{"no-gutters":""},{default:d(()=>[r(fe,{class:"border-e",cols:"6"},{default:d(()=>[r(St,{modelValue:l.startDate,"onUpdate:modelValue":[o=>l.startDate=o,o=>s.updateStartDateTime(u)],color:"primary",elevation:"0",locale:"zh-cn","show-adjacent-months":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),r(fe,{cols:"6"},{default:d(()=>[r(Pt,{modelValue:l.startTime,"onUpdate:modelValue":[o=>l.startTime=o,o=>s.updateStartDateTime(u)],color:"primary",elevation:"0",format:"24hr",scrollable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),r(lt,null,{default:d(()=>[r(Ye),r(O,{color:"grey",variant:"text",onClick:o=>l.startDateMenu=!1},{default:d(()=>[...t[53]||(t[53]=[w(" 关闭 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),r(fe,{cols:"12",md:"3"},{default:d(()=>[r(ot,{modelValue:l.endDateMenu,"onUpdate:modelValue":o=>l.endDateMenu=o,"close-on-content-click":!1,"min-width":"auto","offset-y":"",transition:"scale-transition"},{activator:d(({props:o})=>[r(Ae,q({modelValue:l.endFormatted,"onUpdate:modelValue":h=>l.endFormatted=h,rules:[h=>!!h||"结束时间不能为空",h=>s.validateTimeFormat(h,"结束时间"),()=>s.validateEndAfterStart(l),()=>s.validateNoTimeOverlap(l,u)],density:"comfortable",label:"结束时间",placeholder:"2025/01/01 11:00","prepend-inner-icon":"mdi-clock-end"},{ref_for:!0},o,{variant:"outlined",onBlur:h=>s.updateEndDateTimeFromInput(u)}),{append:d(()=>[r(K,null,{default:d(()=>[...t[54]||(t[54]=[w("mdi-calendar-clock",-1)])]),_:1})]),_:1},16,["modelValue","onUpdate:modelValue","rules","onBlur"])]),default:d(()=>[r(Pe,{"min-width":"500"},{default:d(()=>[r(Le,{class:"text-center py-3 bg-error-lighten-5"},{default:d(()=>[r(K,{class:"mr-2",color:"error"},{default:d(()=>[...t[55]||(t[55]=[w("mdi-clock-end",-1)])]),_:1}),t[56]||(t[56]=w(" 选择结束时间 ",-1))]),_:1}),r(Oe,{class:"pa-0"},{default:d(()=>[r(He,{"no-gutters":""},{default:d(()=>[r(fe,{class:"border-e",cols:"6"},{default:d(()=>[r(St,{modelValue:l.endDate,"onUpdate:modelValue":[o=>l.endDate=o,o=>s.updateEndDateTime(u)],color:"error",elevation:"0",locale:"zh-cn","show-adjacent-months":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),r(fe,{cols:"6"},{default:d(()=>[r(Pt,{modelValue:l.endTime,"onUpdate:modelValue":[o=>l.endTime=o,o=>s.updateEndDateTime(u)],color:"error",elevation:"0",format:"24hr",scrollable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),r(lt,null,{default:d(()=>[r(Ye),r(O,{color:"grey",variant:"text",onClick:o=>l.endDateMenu=!1},{default:d(()=>[...t[57]||(t[57]=[w(" 关闭 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),r(fe,{cols:"12",md:"2"},{default:d(()=>[r(Ae,{modelValue:l.durationMinutes,"onUpdate:modelValue":o=>l.durationMinutes=o,rules:[o=>!!o||"时长不能为空",o=>!isNaN(o)||"时长必须是数字",o=>parseInt(o)>0||"时长必须大于0",o=>parseInt(o)<=1440||"时长不能超过1440分钟（24小时）"],type:"number",min:"1",max:"1440",density:"comfortable",label:"时长（分钟）",placeholder:"例如：120","prepend-inner-icon":"mdi-timer",variant:"outlined",hint:s.durationHint(l),"persistent-hint":"",onBlur:o=>s.updateDurationFromInput(u)},null,8,["modelValue","onUpdate:modelValue","rules","hint","onBlur"])]),_:2},1024),a.enableCustomAlertTime?(H(),ie(fe,{key:0,cols:"12",md:"2"},{default:d(()=>[r(Ae,{modelValue:l.alertTime,"onUpdate:modelValue":o=>l.alertTime=o,rules:[o=>!!o||"提醒时间不能为空",o=>!isNaN(o)||"提醒时间必须是数字",o=>parseInt(o)>=0||"提醒时间不能为负数",o=>parseInt(o)<=120||"提醒时间不能超过120分钟"],type:"number",min:"0",max:"120",density:"comfortable",label:"提醒时间（分钟）",placeholder:"例如：15","prepend-inner-icon":"mdi-bell-ring",variant:"outlined",hint:"考试结束前提醒","persistent-hint":""},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024)):oe("",!0)]),_:2},1024)])]),_:2},1024))),128))]),_:1})):(H(),be("div",Dl,[r(K,{class:"mb-4",color:"grey-lighten-2",size:"80"},{default:d(()=>[...t[58]||(t[58]=[w(" mdi-calendar-blank ",-1)])]),_:1}),t[60]||(t[60]=m("div",{class:"text-h5 text-grey-darken-1 mb-2"},"暂无考试科目安排",-1)),t[61]||(t[61]=m("div",{class:"text-body-1 text-grey mb-4"},' 点击上方"添加科目"按钮开始配置 ',-1)),r(O,{color:"success","prepend-icon":"mdi-plus",size:"large",variant:"elevated",onClick:s.addExamInfo},{default:d(()=>[...t[59]||(t[59]=[w(" 立即添加科目 ",-1)])]),_:1},8,["onClick"])]))]),_:1})]),_:1})])):oe("",!0),r(ya,{modelValue:a.deleteDialog,"onUpdate:modelValue":t[9]||(t[9]=l=>a.deleteDialog=l),"max-width":"400"},{default:d(()=>[r(Pe,null,{default:d(()=>[r(Le,{class:"d-flex align-center"},{default:d(()=>[r(K,{class:"mr-2",color:"error"},{default:d(()=>[...t[62]||(t[62]=[w("mdi-delete-alert",-1)])]),_:1}),t[63]||(t[63]=w(" 确认删除配置 ",-1))]),_:1}),r(Oe,null,{default:d(()=>[t[64]||(t[64]=w(" 确定要删除配置 ",-1)),m("strong",null,se(a.localConfig.examName||`配置 ${n.configId}`),1),t[65]||(t[65]=w(" 吗？ ",-1)),t[66]||(t[66]=m("br",null,null,-1)),t[67]||(t[67]=m("small",{class:"text-grey"},"此操作不可撤销，将会删除所有相关数据",-1))]),_:1}),r(lt,null,{default:d(()=>[r(Ye),r(O,{color:"grey",variant:"text",onClick:t[8]||(t[8]=l=>a.deleteDialog=!1)},{default:d(()=>[...t[68]||(t[68]=[w(" 取消 ",-1)])]),_:1}),r(O,{loading:a.deleting,color:"error",variant:"outlined",onClick:s.deleteConfig},{default:d(()=>[...t[69]||(t[69]=[w(" 删除 ",-1)])]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Yl=ca(Ka,[["render",Cl],["__scopeId","data-v-a0481b01"]]);export{St as V,Yl as _,Ea as a};
